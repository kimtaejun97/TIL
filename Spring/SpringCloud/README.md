# ğŸ“Œ Cloud Native ì™€ MicroService
## ğŸ§ Software Architecture: Antifragile ì˜ í•µì‹¬(Cloud Native)
- Auto Scaling: ìµœì†Œí•œì˜ ì¸ìŠ¤í„´ìŠ¤ ~ í•„ìš”ì— ë”°ë¼ ìŠ¤ì¼€ì¼ ì•„ì›ƒí•˜ì—¬ ì‚¬ìš©ëŸ‰ì— ë§ì¶° ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤.
- Microservices: Cloud Native Applicationì˜ í•µì‹¬ìœ¼ë¡œ ì„œë¹„ìŠ¤ë¥¼ ìˆ˜ ë§ì€ ë…ë¦½ì ì¸ ëª¨ë“ˆë¡œ ì„¸ë¶„í™” í•œë‹¤.
- Chaos Engineering: ì‹œìŠ¤í…œì´ ì˜ˆì¸¡í•˜ì§€ ëª»í•œ ìƒí™©ì—ë„ ê²¬ë”œ ìˆ˜ ìˆë„ë¡ ì„¤ê³„í•˜ëŠ” ë°©ë²•, ê·œì¹™.
- Continuous Deployment : ì§€ì†ì ì¸ ë°°í¬.


## ğŸ§ Cloud Native Architecture ì˜ íŠ¹ì§• 

í´ë¼ìš°ë“œ í™˜ê²½ì—ì„œ í•„ìš”ì— ì˜í•´ í™•ì¥ ê°€ëŠ¥í•˜ê¸° ë–„ë¬¸ì— ì•„í‚¤í…ì²˜ë¡œ ì‹œìŠ¤í…œì˜ ìˆ˜í‰ì  í™•ì¥(ìŠ¤ì¼€ì¼ ì•„ì›ƒ)ì— ìœ ì—°í•˜ë‹¤. ì‚¬ìš©ëŸ‰ì— ë§ì¶° ë¦¬ì†ŒìŠ¤ë¥¼ ì¡°ì ˆí•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì€
ê³§ ë¹„ìš©ì˜ ì ˆì•½ì„ ê°€ì ¸ì˜¨ë‹¤.   
ì„œë¹„ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ íŒ¨í‚¤ì§€ ë‹¨ìœ„ë¡œ ì‘ê²Œ ìª¼ê°œì–´ ìš´ì˜í•˜ê¸° ë•Œë¬¸ì— ì»¨í…Œì´ë„ˆ ê¸°ë°˜ì˜ ìš´ì˜ì—ë„ ì í•©í•˜ë‹¤.

ë¶„í• ëœ ì„œë¹„ìŠ¤ë“¤ì„ ë…ë¦½ì ìœ¼ë¡œ ìš´ì˜í•˜ê¸° ìœ„í•´ í•˜ê¸°ìœ„í•´ ë¬´ìƒíƒœ í†µì‹  í”„ë¡œí† ì½œì„ ì‚¬ìš©í•˜ì—¬ ì¢…ì†ì„±ì„ ìµœì†Œí™”í•œë‹¤.   
ë˜í•œ, ì„œë¹„ìŠ¤ë“¤ì´ ë¶„í• ë˜ì–´ ìˆê¸° ë–„ë¬¸ì— íŠ¹ì • ì„œë¹„ìŠ¤ì— ì¥ì• ê°€ ë°œìƒí•˜ì—¬ë„ ë‹¤ë¥¸ ì„œë¹„ìŠ¤ì— ì˜í–¥ì„ ì£¼ì§€ ì•Šê³ , í•´ë‹¹ ì„œë¹„ìŠ¤ë§Œ ë””ë²„ê¹… í•˜ì—¬ ë‹¤ì‹œ ë°°í¬í•˜ë©´ ëœë‹¤.


Cloud Native Applicationdì€ ë‹¤ìŒì„ ë”°ë¥¸ë‹¤
- Microservice
- CI / CD : ì¹´ë‚˜ë¦¬ ë°°í¬ ì‚¬ìš©(ì´ íŠ¸ë˜í”½ì˜ 5~10%ë§Œì„ ë°›ìŒ)
- DevOps: Plan - Create - Verify - Package - Release - Configure - Monitor ì˜ ê³¼ì •ì„ ìˆœí™˜ ë°˜ë³µí•œë‹¤.
  > ì¡°ê¸ˆ ë” ì§§ì€ ì£¼ê¸°ì˜ í…ŒìŠ¤íŠ¸, ë°°í¬
- Container ê°€ìƒí™”: ê³µí†µì ì¸ ë¦¬ì†ŒìŠ¤ëŠ” ê³µìœ í•˜ê³ , í•„ìš”í•œ ë¦¬ì†ŒìŠ¤ë§Œì„ ë…ë¦½ì ìœ¼ë¡œ ìš´ì˜. ë” ê°€ë³ê³  ë¹ ë¥´ë‹¤.


## ğŸ§ Cluoud Native Application ì„ êµ¬í˜„í•  ë•Œ ê³ ë ¤í•  15ê°€ì§€
> - https://12factor.net/
> - PaaS í˜•íƒœì˜ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ëŠ” Herokuì—ì„œ ì •ë¦¬í•œ ê°€ì´ë“œ ë¼ì¸.


### 1. Base Code
- ì½”ë“œì˜ í†µì¼ì ì¸ ê´€ë¦¬

### 2. Dependency Isolation
- ê° ë§ˆì´í¬ë¡œ ì„œë¹„ìŠ¤ëŠ” ì¢…ì†ì„±ì„ ê°€ì§€ê³  íŒ¨í‚¤ì§•ë˜ì–´ ìˆì–´ ëª¨ë“ˆì˜ ë³€ê²½ì´ ì „ì²´ ì‹œìŠ¤í…œì— ì˜í–¥ì„ ì£¼ì§€ ì•Šê²Œ ì„¤ê³„ë˜ì–´ì•¼ í•œë‹¤.

### 3. Configurations
- ì½”ë“œ ì™¸ë¶€ì—ì„œ êµ¬ì„± ê´€ë¦¬ ë„êµ¬ë¥¼ í†µí•´ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ì— í•„ìš”í•œ ì‘ì—…ì„ ì œì–´í•˜ì—¬ ë™ì¼í•œ ë°°í¬ê°€ ì˜¬ë°”ë¥¸ êµ¬ì„±ì´ ì ìš©ëœ í™˜ê²½ì—ì„œ ì „íŒŒë˜ì–´ì•¼ í•œë‹¤.

### 4. Linkable Blacking Services
-  DB, Cache ë“± ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ê°€ ê°€ì ¸ì•¼í•  ê¸°ëŠ¥ì„ ì¶”ê°€ë¡œ ì§€ì›í•  ìˆ˜ ìˆë‹¤. 

### 5. Stages Of Creation
- ë¹Œë“œ, ë¦´ë¦¬ì¦ˆ, ì‹¤í–‰ í™˜ê²½ì„ ë¶„ë¦¬í•´ì•¼ í•œë‹¤.
- ê³ ìœ í•œ íƒœê·¸, ë¡¤ë°±, CI/CDë¥¼ ì´ìš©í•œ ìë™í™”ëœ ì‹œìŠ¤í…œ êµ¬ì¶•

### 6. Stateless Processes
- í•˜ë‚˜ì˜ ì„œë¹„ìŠ¤ëŠ” ë…ë¦½ì ìœ¼ë¡œ ìš´ì˜ë  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤. í•„ìš”í•˜ë‹¤ë©´ ìºì‹œ, ë°ì´í„° ì €ì¥ì†Œë¥¼ ì´ìš©í•˜ì—¬ ë°ì´í„°ë¥¼ êµí™˜.

### 7. Port Binding
- ê°ê°ì˜ ì„œë¹„ìŠ¤ëŠ” ìì²´ í¬íŠ¸ì—ì„œ ë…¸ì¶œë˜ëŠ” ì¸í„°í˜ì´ìŠ¤ì™€ ìì²´ ê¸°ëŠ¥ì´ ìˆì–´ì•¼ í•œë‹¤.

### 8. Concurrency
- ì—¬ëŸ¬ ì¸ìŠ¤í„´ìŠ¤ê°€ ë™ì‹œì— ì‹¤í–‰ë  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤.

### 9. Disposability
- ì„œë¹„ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ê°€ ì‚­ì œê°€ ê°€ëŠ¥í•˜ê³ , ì •ìƒì ì¸ ì¢…ë£Œë¥¼ í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤.

### 10. Development & Production Parity
- ê°œë°œ, í”„ë¡œë•ì…˜ ë‹¨ê³„ê°€ êµ¬ë¶„ë˜ì–´ì•¼ í•œë‹¤.

### 11. Logs
- ë¡œê¹… ì‹œìŠ¤í…œ, ì–´í”Œë¦¬ì¼€ì´ì…˜ ë¡œì§ê³¼ ë¶„ë¦¬ë˜ì–´ ì„œë¹„ìŠ¤ì— ì˜í•´ ìƒì„±ëœ ë¡œê·¸ë¥¼ ì´ë²¤íŠ¸ í•¸ë“¤ë§ ë°©ì‹ìœ¼ë¡œ ì²˜ë¦¬.

### 12. Admin Processes for Eventual Processes
- ìš´ì˜ë˜ê³  ìˆëŠ” ì„œë¹„ìŠ¤ë“¤ì´ ì–´ë–¤ í˜•íƒœë¡œ ì‚¬ìš©ë˜ëŠ”ì§€, ë¦¬ì†ŒìŠ¤ê°€ ì–´ë–»ê²Œ ì‚¬ìš©ë˜ëŠ”ì§€ ë“±ì„ íŒŒì•…í•  ìˆ˜ ìˆëŠ” ê´€ë¦¬ë„êµ¬ê°€ ìˆì–´ì•¼ í•œë‹¤.

### 13. API First
- ëª¨ë“  ì„œë¹„ìŠ¤ëŠ” API í˜•íƒœë¡œ ì œê³µë˜ê³ , ì‚¬ìš©ìê°€ ì–´ë–»ê²Œ ì‚¬ìš©í• ì§€ë¥¼ ê³ ë¯¼í•˜ì—¬ êµ¬í˜„í•œë‹¤.

### 14. Telemetry
- ëª¨ë“  ì§€í‘œëŠ” ì‹œê°í™”ë˜ì–´ ê´€ë¦¬ë˜ì–´ì•¼ í•˜ë‚Ÿ.

### 15. Authentication and Authorization
- ì ì ˆí•œ ì¸ì¦, ê¶Œí•œ ì •ë³´ë¥¼ ìš”êµ¬í•´ì•¼ í•œë‹¤.


## ğŸ¤” MicroService ë€?
![img.png](img.png)     

ì´ì „ Monolithic Architecture ì—ì„œëŠ” ëª¨ë“  ë¡œì§ì´ í•˜ë‚˜ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ëª¨ì—¬ìˆê¸° ë–„ë¬¸ì— í•˜ë‚˜ì˜ ê¸°ëŠ¥ì„ ìˆ˜ì •í•˜ë©´ ëª¨ë“  ê¸°ëŠ¥ì„ ë‹¤ì‹œ ë¹Œë“œí•´ì•¼ í–ˆë‹¤.      
ê·¸ëŸ¬ë‚˜, MicroServiceëŠ” **ë‹¤ë¥¸ ì„œë¹„ìŠ¤ì™€ í•¨ê»˜ ì‘ë™í•˜ëŠ” ì‘ì€ ì„œë¹„ìŠ¤**ë¡œ ì •ì˜ëœë‹¤. ì´ëŸ¬í•œ ì˜ê²Œ ìª¼ê°œì§„ ëª¨ë“ˆë“¤ì´ ëª¨ì—¬ í•˜ë‚˜ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì´ë£¬ë‹¤.

ì„œë¹„ìŠ¤ë“¤ì€ ë…ë¦½ì ì´ê¸° ë–„ë¬¸ì— ì„œë¹„ìŠ¤ì—ì„œ ìˆ˜í–‰í•˜ëŠ” ê¸°ëŠ¥ì— ë”°ë¼ ë§ì¶° ì–¸ì–´ë‚˜ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ë‹¤ë¥´ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.   
ê° ì„œë¹„ìŠ¤ë“¤ì´ ìª¼ê°œì ¸ìˆê¸° ë•Œë¬¸ì— ì—…ë¬´ì˜ ë¶„í• ì´ ì‰½ê³ , ìœ ì§€ ë³´ìˆ˜ê°€ ë” ì‰¬ì›Œì§„ë‹¤, ì‘ì€ ë‹¨ìœ„ì´ê¸° ë•Œë¬¸ì— ë¹Œë“œ, ë°°í¬, ì¥ì• ì˜ ëŒ€ì²˜ì— ìˆì–´ì„œë„ ì´ì ì„ ê°€ì§„ë‹¤.

ë§ì€ ì¥ì ì„ ê°€ì§€ê³  ìˆì§€ë§Œ ë‹¨ì ì´ ì—†ëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤.   
ëª¨ë“ˆì„ ì˜ê°œ ìª¼ê° ë‹¤ëŠ” ê²ƒì€ í•˜ë‚˜ì˜ ë™ì‘í•˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ìœ„í•´ì„œëŠ” ì´ì— í•„ìš”í•œ ì„œë¹„ìŠ¤ë¥¼ ëª¨ë‘ ë™ì‘ì‹œì¼œì•¼ í•œë‹¤ëŠ” ë³µì¡ì„±ì„ ì•¼ê¸°í•œë‹¤.   
ê·¸ë¦¬ê³ , ê° ì„œë¹„ìŠ¤ë“¤ì´ í†µì‹ í•´ì•¼ í•˜ê¸° ë•Œë¬¸ì— í†µì‹  ê´€ë ¨í•œ ì˜¤ë¥˜ê°€ ì¶”ê°€ì ìœ¼ë¡œ ë°œìƒí•  ìˆ˜ ìˆë‹¤.

ë§ˆì´í¬ë¡œ ì„œë¹„ìŠ¤ì˜ íŠ¹ì§•ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.
- ì„œë¹„ìŠ¤ì˜ ê²½ê³„ê°€ êµ¬ë¶„ë˜ëŠ” ì‘ì€ ëª¨ë“ˆ.
- RESTful
- í™˜ê²½ì„¤ì • ì •ë³´ëŠ” ì™¸ë¶€ì˜ ì‹œìŠ¤í…œì— ì˜í•´ ê´€ë¦¬.(ë°°í¬ì— í¬í•¨ë˜ì§€ ì•Šë„ë¡)
- í´ë¼ìš°ë“œ ë„¤ì´í‹°ë¸Œ ê¸°ìˆ  í™œìš©
- ë™ì ì¸ ìŠ¤ì¼€ì¼ ì—…, ìŠ¤ì¼€ì¼ ë‹¤ìš´
- CI/CD
- ì„œë¹„ìŠ¤ì˜ ì‹œê°í™”.

## ğŸ§ MSAì˜ í‘œì¤€ êµ¬ì„±
![img_5.png](img_5.png)

**í´ë¼ì´ì–¸íŠ¸**ì—ê²Œì„œ ìš”ì²­ì´ ë“¤ì–´ì˜¤ë©´ **API Gateway**ë¼ëŠ” ì§„ì…ì ì„ í†µí•´ í•„ìš”í•œ ì„œë¹„ìŠ¤ì— ìš”ì²­ì„ í•˜ê²Œëœë‹¤.   
**API Gatewayì—** ìˆ˜ì§‘ëœ ìš”ì²­ë“¤ì€ **Sevice Router**ì— ì˜í•´ ì–´ë””ë¡œ ê°€ì•¼í•˜ëŠ”ì§€ ê²°ì •ë˜ê²Œ ë˜ëŠ”ë°,   
ì´ ë•Œ **Service Discovery**ì˜ ë“±ë¡ ë¦¬ìŠ¤íŠ¸ì—ì„œ í•´ë‹¹ ì„œë¹„ìŠ¤ì˜ ìœ„ì¹˜ë¥¼ ê²€ìƒ‰í•˜ê²Œ ëœë‹¤.

ìœ„ì¹˜ë¥¼ ì•Œì•„ëƒˆë‹¤ë©´ ì„œë¹„ìŠ¤ë¡œ ì´ë™í•˜ê²Œ ë˜ëŠ”ë°, êµ¬ì„±ì´ ì—¬ëŸ¬ê°œë¡œ ë¶„ì‚°ëœ í˜•íƒœë¡œ ë˜ì–´ìˆë‹¤ë©´ **Load Balancer** ì— ì˜í•´ ì´ë™í•  ì„œë¹„ìŠ¤ê°€ ê²°ì •ëœë‹¤.   
ë³´í†µ ì´ëŸ¬í•œ ì„œë¹„ìŠ¤ë“¤ì€ **ì»¨í…Œì´ë„ˆ ê°€ìƒí™”** ê¸°ìˆ ì„ í†µí•´ì„œ êµ¬ì„±ì´ ë˜ì–´ìˆë‹¤.
ë‹¤ë¥¸ ì„œë¹„ìŠ¤ë“¤ê³¼ì˜ ì—°ê²°ì€ **MOM(Message Oriented Middleware)** ê³¼ **ì €ì¥ì†Œ**ì™€ ê°™ì€ **Backing Service**ë“¤ì„ ì´ìš©í•˜ì—¬ ì´ë£¨ì–´ì§„ë‹¤.

í™˜ê²½ ì„¤ì • ì •ë³´ëŠ” **Config Store**ì™€ ê°™ì´ ì„œë¹„ìŠ¤ì˜ ì™¸ë¶€ì—ì„œ í•´ë‹¹ ì •ë³´ë¥¼ ì €ì¥í•˜ê³  ìˆê²Œ ë˜ê³ ,
ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë°°í¬ë¥¼ ìœ„í•´ **CI/CD** ê´€ë ¨ ë„êµ¬ë“¤ì„ ì‚¬ìš©í•˜ê²Œ ëœë‹¤.    
ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ë°°í¬ëœ ì´í›„ì—ëŠ” **ëª¨ë‹ˆí„°ë§ ê¸°ëŠ¥**ì´ë‚˜ **ì§„ë‹¨ ê¸°ëŠ¥**ì„ ì—°ê²°í•˜ì—¬ ì‚¬ìš©í•œë‹¤.

- ### ğŸ‘† Service Mesh
    - Service Discovery, Config Store, Service Router, Load Balancer, ì•”í˜¸í™”, ì¸ì¦/ì¸ê°€ ë“±ì˜ ë‚´ë¶€ í†µì‹ .
    - ì¶”ìƒí™”, ì•ˆì „ì„±, ì‹ ë¢°ì„±, ë³´ì•ˆì„±, ê°€ì‹œì„±ì„ ë³´ì¥í•  ìˆ˜ ìˆë„ë¡ í•´ì¤€ë‹¤.
    - 


## ğŸ§ MSAë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•œ ê¸°ìˆ 
![img_1.png](img_1.png)    

- Zuul: ì•ˆì „ì„±ê³¼ í´ë¼ì´ì–¸íŠ¸ ë³„ ìœ ì—°í•œ ëŒ€ì²˜ë¥¼ ìœ„í•œ API Gateway (ì—°ê²°í•œ ë°±ì—”ë“œ ì„œë¹„ìŠ¤ì˜ idë¥¼ ë¯¸ë¦¬ ì •ì˜ëœ config íŒŒì¼ì—ì„œ ì½ëŠ”ë‹¤.)
    - ì¸ì¦ / ì¸ê°€ì˜ ì—­í• , ë¶€ì ì ˆí•œ ìš”ì²­ì„ ì°¨ë‹¨í•œë‹¤. - (pre filter)
    - í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ì— ë”°ë¼ ì ì ˆí•œ ì„œë¹„ìŠ¤ë¡œ ë¡œë“œë°¸ëŸ°ì‹±í•˜ê³ , ë¼ìš°íŒ…(zuul core library) - (routing filter)
    - íŠ¸ë˜í”½ ë¡œê¹… - (post filter)     
    - Circuit Break - (routing filter)
        >  ![img_2.png](img_2.png)
        > - Pre Filter: ë¡œê¹…, ì¸ì¦ ë“±ì˜ ì²˜ë¦¬ê°€ ì´ë£¨ì–´ì§„ë‹¤.
        > - Routing Filter: ë™ì  ë¼ìš°íŒ…ì„ ë‹¤ë£¨ëŠ” í•„í„°.
        > - Post Filter: ì‘ë‹µì— í—¤ë”ë¥¼ ì¶”ê°€í•˜ê±°ë‚˜, ì‘ë‹µì˜ ë©”íƒ€ ì •ë³´ë“¤ì„ ìˆ˜ì§‘, í†µê³„(ì‘ë‹µ ì†ë„, ìƒíƒœì½”ë“œ ë“±)
        > - Error Filter: ì—ëŸ¬ ë°œìƒì‹œ ì‹¤í–‰ëœë‹¤.     
        > -  í•„í„°ëŠ” Request -> pre -> routing -> postì˜ ìˆœì„œë¡œ ì‹¤í–‰ëœë‹¤.(í•„í„°ë¼ë¦¬ í†µì‹ í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆê³  ìˆœì„œëŒ€ë¡œë§Œ ì‹¤í–‰ëœë‹¤.)
      
- Ribbon Library: ë¶€í•˜ë¥¼ ì ì ˆí•˜ê²Œ ë¶„ì‚°í•˜ëŠ” ë¡œë“œ ë²¨ëŸ°ì„œ.
- Hysterix Library: ì¥ì• ë¥¼ ê°ì§€í•˜ê³ , ëŒ€ì²˜í•˜ëŠ” Circuit Breaker
- Eureka: ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤(Eureka Client)ì˜ ë“±ë¡(Registry)ê³¼ í•´ì§€, ì—°ê²° ì •ë³´ íƒìƒ‰(Discovery)ì„ ë‹´ë‹¹í•˜ëŠ” Naming Server
    - 30ì´ˆ ë§ˆë‹¤ ìœ ë ˆì¹´ ì„œë²„ë¡œ ë¶€í„° ë‹¤ë¥¸ ìœ ë ˆì¹´ í´ë¼ì´ì–¸íŠ¸ë“¤ì˜ ë³€ê²½ ì‚¬í•­ì„ ê°±ì‹ . ìœ ë ˆì¹´ í´ë¼ì´ì–¸íŠ¸ë“¤ì€ 30ì´ˆë§ˆë‹¤ pingì„ ìœ ë ˆì¹´ ì„œë²„ë¡œ ì „ì†¡ pingì´ ì˜¤ì§€ ì•Šìœ¼ë©´  
    ìœ ë ˆì¹´ ì„œë²„ëŠ” í•´ë‹¹ í´ë¼ì´ì–¸í‹€ë¥¼ ë ˆì§€ìŠ¤íŠ¸ë¦¬ì—ì„œ ì œê±°í•œë‹¤.
- Kafka: ë©”ì‹œì§• í ì„œë¹„ìŠ¤, ë°ì´í„° ë™ê¸°í™”ë¥¼ ìœ„í•´ ì‚¬ìš©í•œë‹¤.    
  ë°ì´í„°ì˜ ë³€ê²½ì´ ì¼ì–´ë‚˜ë©´ ë°ì´í„°ë¥¼ ì¹´í”„ì¹´ì— ì „ë‹¬í•˜ê³ , ì¹´í”„ì¹´ëŠ” í•´ë‹¹ ë°ì´í„°ë¥¼ êµ¬ë…í•œ ì„œë¹„ìŠ¤ì—ê²Œ ë³€ê²½ ì‚¬í•­ì„ ì „ë‹¬í•´ì¤€ë‹¤.
- Zipkin, ELK: ëª¨ë‹ˆí„°, ë¡œê·¸ ì¶”ì 
  
ë” ìì„¸í•œ ê²ƒì€ ë’¤ì—ì„œ ë‹¤ì‹œ ì•Œì•„ë³¸ë‹¤.


## ğŸ¤” SOA ì™€ MSA ëŠ” ì–´ë–»ê²Œ ë‹¤ë¥¼ê¹Œ?
> - SOA: Service Oriented Architecture
> - MSA: :Micro Service Architecture

SOAëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ì¬ìƒìš”ì„ í†µí•œ ë¹„ìš©ì˜ ì ˆê°ì— ëª©ì ì´ ìˆê³ , MSAëŠ” ì„œë¹„ìŠ¤ ê°„ì˜ ê²°í•©ë„ë¥¼ ë‚®ì¶”ì–´ ë³€í™”ì— ëŠ¥ë™ì ìœ¼ë¡œ ëŒ€ì‘í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ê²ƒì— ëª©ì ì´ ìˆë‹¤.   
ë–„ë¬¸ì— SOAëŠ” ì„œë¹„ìŠ¤ì˜ ê³µìœ ë¥¼ ìµœëŒ€í™”í•˜ì—¬ ë¹„ìš©ì„ ì ˆê°í•˜ê³ , MSAëŠ” ë°˜ëŒ€ë¡œ ì„œë¹„ìŠ¤ê°„ì˜ ê³µìœ ë¥¼ ìµœì†Œí™” í•˜ì—¬ ê° ì„œë¹„ìŠ¤ê°€ ë…ë¦½ì ì¼ ìˆ˜ ìˆë„ë¡ í•œë‹¤.

SOA ë°©ì‹ì—ì„œëŠ” ê³µí†µì˜ ì„œë¹„ìŠ¤ë¥¼ ë²„ìŠ¤(ESB)ë¥¼ í†µí•´ í•œê³³ì— ëª¨ì€ í›„ í•˜ë‚˜ì˜ ì„œë¹„ìŠ¤ë¡œ ì‚¬ìš©í•˜ê³ , MSAëŠ” ê° ë…ë¦½ëœ ì„œë¹„ìŠ¤ê°€ REST API ë°©ì‹ìœ¼ë¡œ í†µì‹ í•œë‹¤.



# ğŸ“Œ Spring Cloud Netfilx Eureka

## ğŸ§ Eureka Server
> í”„ë¡œì íŠ¸ ìƒì„±ì‹œ ì˜ì¡´ì„± Eureka Server ì¶”ê°€.

- ### @EnableEurekaServer
  ```java
  @SpringBootApplication
  @EnableEurekaServer // #1
  public class SpringcloudApplication {
  
      public static void main(String[] args) {
          SpringApplication.run(SpringcloudApplication.class, args);
      }
  
  }
  ```
  - (#1): ìœ ë ˆì¹´ ì„œë²„ë¡œ ë“±ë¡í•˜ëŠ” ì• ë…¸í…Œì´ì…˜, Service Discovery ë¡œì„œ í”„ë¡œì íŠ¸ë¥¼ ì‹¤í–‰ì‹œí‚¨ë‹¤.

- ### ê¸°ë³¸ ì„¤ì •
  ```yml
  server:
    port: 8761
  
  #1
  spring:
    application:
      name: discoveryservice
  
  # 2
  eureka:
    client:
      register-with-eureka: false  
      fetch-registry: false
  ```
  - (#1): ë§ˆì´í¬ë¡œ ì„œë¹„ìŠ¤ì—ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹ë³„í•˜ê¸° ìœ„í•œ ê³ ìœ í•œ ID ë¶€ì—¬
  - (#2): ìœ ë ˆì¹´ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ê²Œ ë˜ë©´ ê¸°ë³¸ì ìœ¼ë¡œ ìœ ë ˆì¹´ í´ë¼ì´ì–¸íŠ¸ë¡œ ë“±ë¡í•˜ë ¤ê³  ì‹œë„í•˜ê²Œ ë˜ëŠ”ë°, í˜„ì¬ í”„ë¡œì íŠ¸ëŠ” ìœ ë ˆì¹´ ì„œë²„ë¡œ ì‚¬ìš©í•  ê²ƒì´ê¸° ëŒ€ë¬¸ì— falseë¡œ ì§€ì •.

- ### ìœ ë ˆì¹´ ëŒ€ì‹œë³´ë“œ
  ![img_7.png](img_7.png)


## ğŸ§ Eureka Client
> Eureka-client ì˜ì¡´ì„± ì¶”ê°€.

- ### @EnableEurekaClient, @EnableDiscoveryClient
  ```java
  @EnableDiscoveryClient
  @SpringBootApplication
  public class UserServiceApplication {
  
      public static void main(String[] args) {
          SpringApplication.run(UserServiceApplication.class, args);
      }
  
  }
  ```
  - DiscoveryClient ë¥¼ ì¡°ê¸ˆ ë” êµ¬í˜„í•´ ë†“ì€ ê²ƒì´ EurekaClient 

- ### ê¸°ë³¸ ì„¤ì •
  ```yml
  server:
    port: 9001
  
  spring:
    application:
      name: user-service
  
  eureka:
    client:
      register-with-eureka: true
      fetch-registry: true #1
      service-url:
        defaultZone: http://127.0.0.1:8761/eureka #2
  ```
  - (#1): ìœ ë ˆì¹´ ì„œë²„ë¡œë¶€í„° ì¸ìŠ¤í„´ìŠ¤ë“¤ì˜ ì •ë³´ë¥¼ ì£¼ê¸°ì ìœ¼ë¡œ ê°€ì ¸ì˜¬ ê²ƒì¸ì§€ ì„¤ì •í•˜ëŠ” ì†ì„±.
  - (#2): ë“±ë¡í•  ì„œë²„ì˜ ìœ„ì¹˜, ì´ì „ì— ìƒì„±í•œ ìœ ë ˆì¹´ ì„œë²„ì˜ í˜¸ìŠ¤íŠ¸ ì£¼ì†Œë¥¼ ì ê³ , ì—”ë“œí¬ì¸íŠ¸ë¥¼ ëª…ì‹œí•´ ì£¼ì—ˆë‹¤.   
  
  ![img_6.png](img_6.png)    

  ì´ì „ì— ì‚´í´ë³´ì•˜ë˜ ìœ ë ˆì¹´ ì„œë²„ì˜ ëŒ€ì‹œë³´ë“œë¡œ ëŒì•„ê°€ë³´ë©´ ë°©ê¸ˆ ì‹¤í–‰ì‹œí‚¨ user-serviceê°€ ì‹¤í–‰ë˜ê³  ìˆëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.


### ğŸ’¡ ì„œë¹„ìŠ¤ì˜ ì‹¤í–‰ ë°©ë²•
```
1. Application Run
  - ì—¬ëŸ¬ê°œì˜ Application ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±(Edit configurations)í›„ -Dserver.port ì˜µì…˜ì„ ë‹¤ë¥´ê²Œ ì„¤ì •í•´ ì£¼ì–´ ì—¬ëŸ¬ê°œì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë„ìš¸ ìˆ˜ ìˆë‹¤.
2. ë¹Œë“œ ë„êµ¬ë¥¼ ì´ìš©í•˜ì—¬ ì‹¤í–‰
  - ë¹Œë“œ ë„êµ¬ë¥¼ ì´ìš©í•˜ì—¬ build and run
  - gradleì˜ ê²½ìš° ./gradlew build í›„ ./gradlew bootRun --args='--server.port=9003'
3. java -jar ë¡œ ì‹¤í–‰
  - ë¹Œë“œ
  - java -jar -Dserver.port=9004 ./build/libs/user-service-0.0.1-SNAPSHOT.jar
```

- ### ëœë¤í¬íŠ¸ë¥¼ ì´ìš©í•œ ê°„ë‹¨í•œ ë¡œë“œë°¸ëŸ°ì‹±
  - server.port: 0 ìœ¼ë¡œ ì„¤ì •.
  - ìœ ë ˆì¹´ ì„œë²„ì—ì„œ ë™ì¼ í˜¸ìŠ¤íŠ¸, ì• í”Œë¦¬ì¼€ì´ì…˜ ì´ë¦„, port=0 ë¥¼ ê°€ì§€ê¸° ë•Œë¬¸ì— í•˜ë‚˜ë°–ì— ë“±ë¡ì´ ë˜ì§€ ì•ŠìŒ.
  - ì‹ë³„ ì•„ì´ë””ë¥¼ ë³€ê²½
     ```
    eureka:
      instance:
        instance-id: ${spring.cloud.client.hostname}:${spring.application.instance_id:${random.value}}
    ```



<br><br>
### ğŸ”‘ ì°¸ê³ 
> -  https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81-%ED%81%B4%EB%9D%BC%EC%9A%B0%EB%93%9C-%EB%A7%88%EC%9D%B4%ED%81%AC%EB%A1%9C%EC%84%9C%EB%B9%84%EC%8A%A4/dashboard
> - https://velog.io/@kim_sunnnny/MicroService-vs-Monolithic-Architecture
> - https://happycloud-lee.tistory.com/213
> - https://techblog.woowahan.com/2523/
> - https://velog.io/@jkijki12/Eureka%EB%9E%80
