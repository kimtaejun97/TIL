### ğŸ’» í”„ë¡œì íŠ¸ë¥¼ ë§Œë“¤ì–´ ë”°ë¡œ ì ê¸° ì• ë§¤í•œ ê³µë¶€ë‚´ìš© ì •ë¦¬~

# ğŸ“Œ ì´ë¯¸ì§€ ì „ì†¡
***
- ### Html form
````html
<form id="input-image" method="post" enctype="multipart/form-data">
    <input type="file" name="image" >
    <button type="button" class="btn btn-success" id="btn-upload">íŒŒì¼ ì—…ë¡œë“œ</button>
</form>
````
- inputì— enctypeì„ ì£¼ë©´ ì´ë¯¸ì§€ë¥¼ multipart/form-dataë¡œ ì „ì†¡ ê°€ëŠ¥. 
- multipleì„ ì£¼ë©´ ì—¬ëŸ¬ê°œì˜ íŒŒì¼ë„ ì—…ë¡œë“œ ê°€ëŠ¥í•˜ë‹¤.

- ### Ajax
````javascript
 upload : function () {
        var formData = new FormData($('#input-image')[0]);
        console.log(formData);

        $.ajax({
            type: 'POST',
            url: '/api/input',
            data: formData,
            enctype: 'multipart/form-data',
            processData: false,
            contentType: false,
            dataType: 'text',
            success: function (result) {
                alert("íŒŒì¼ ì—…ë¡œë“œ ì™„ë£Œ.");
                window.location.href = "/wait-page";
            },
            error: function (e) {
                alert("íŒŒì¼ ì—…ë¡œë“œ ì‹¤íŒ¨: " + JSON.stringify(e));
            }
        });
    }
````
-  Post ë°©ì‹ìœ¼ë¡œ ì „ì†¡. ì²˜ìŒì—ëŠ” dataTypeì„ jsonìœ¼ë¡œ í–ˆì—ˆëŠ”ë°, ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ë°ì´í„°ëŠ” ìˆ˜ì‹ í•˜ì—¬
status 200 codeë¥¼ ë°›ì§€ë§Œ ë°˜í™˜ í˜•ì‹ì´ ë§ì§€ì•Šì•„ errorê°€ ë°œìƒí•˜ì˜€ë‹¤. ë•Œë¬¸ì— ë¦¬í„´ íƒ€ì…ì— ë§ì¶° textë¡œ ë³€ê²½.

- ### Controller
````java
@PostMapping("/api/input")
    public @ResponseBody void inputSaveTest( @RequestParam("image")MultipartFile image) throws IOException {
        String filePath="/Users/kimtaejun/Desktop/Capstone/pidetection/src/main/java/com/back/pidetection/web/";

        String fileName = image.getOriginalFilename();
        System.out.println("íŒŒì¼ ì´ë¦„ : "+fileName);
        byte[] im = image.getBytes();
        long fileSize = (long)im.length;
        System.out.println("íŒŒì¼ í¬ê¸° : "+im.length);

        try{
            image.transferTo(new File(filePath + fileName));

        } catch (IOException e) {
            System.out.println("ì‚¬ìš©ì ì´ë¯¸ì§€ ì €ì¥ ì‹¤íŒ¨.");
            e.printStackTrace();
        }
        System.out.println("ì‚¬ìš©ì ì´ë¯¸ì§€ ì €ì¥ ì„±ê³µ.");

    }
````
- @ResponseBody ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë©´ ajaxì—ì„œ ì‘ë‹µì„ ë°›ì§€ ëª»í•´ errorë¡œ íŒë‹¨í•œë‹¤.     
- RequestParamì—ì„œ ì•„ê¹Œ inputì˜ nameìœ¼ë¡œ ì…ë ¥í•˜ì˜€ë˜ "image"ë¥¼ ì„¤ì •í•˜ê³ , MultipartFile í˜•ì‹ìœ¼ë¡œ ë°ì´í„°ë¥¼ ìˆ˜ì‹ í•œë‹¤.     
- ì´ë¦„, í¬ê¸° ë“±ì˜ ì •ë³´ë¥¼ ì–»ê³  transferTo ë©”ì†Œë“œë¥¼ ì´ìš©í•˜ì—¬ íŒŒì¼ì„ ì €ì¥í•œë‹¤.


# ğŸ“Œ RestTemplate
****
> kakao SDK API ìš”ì²­ì„ ë³´ë‚´ê¸° ìœ„í•´ ì‚¬ìš©.


```java
public JsonNode getInfoByToken(String token) {
        HttpHeaders headers = new HttpHeaders();
        headers.add("Content-type", "application/x-www-form-urlencoded;charset=utf-8");
        headers.add("Authorization", "Bearer " + token);

        HttpEntity entity = new HttpEntity(headers);

        try {
            ResponseEntity<JsonNode> responseEntity = restTemplate.postForEntity("https://kapi.kakao.com/v2/user/me", entity, JsonNode.class);
            if (responseEntity.getStatusCode().is2xxSuccessful()) {
                return responseEntity.getBody();
            }
        }catch (Exception e) {
            log.error(e.getMessage());
        }
        return null;
    }
```
- HttpHeaders ì— í—¤ë”ë¥¼ ì¶”ê°€í•´ ì£¼ê³  HttpEntityë¥¼ ìƒì„±í•˜ì˜€ë‹¤.
- ì´ë¥¼ RestTemplateì˜ postForEntity ë©”ì„œë“œë¥¼ ì´ìš©í•˜ì—¬ Post ìš”ì²­ì„ ë³´ëƒˆë‹¤.
- ì‘ë‹µ ë°ì´í„°ëŠ” JsonNode í˜•ì‹ìœ¼ë¡œ ë°›ì•„ ê°’ì„ êº¼ë‚´ê¸° ì‰½ê²Œ í–ˆë‹¤.
- getForEntity, excute, exchage ë“±ì˜ ë©”ì†Œë“œë¡œ ë‹¤ì–‘í•œ í˜•ì‹ìœ¼ë¡œ ìš”ì²­ì„ ë³´ë‚¼ ìˆ˜ ìˆë‹¤.


# ğŸ“Œ JsonNode
***

```java
JsonNode.get(key)
JsonNode.findValue(key)
JsonNode.findValueAsText(key)
```
- ë°ì´í„°ë¥¼ êº¼ë‚¼ ìˆ˜ ìˆëŠ” ë‹¤ì–‘í•œ ë©”ì„œë“œë¥¼ ì§€ì›í•œë‹¤.
- ObjectMapper ì‚¬ìš©ê°€ëŠ¥.
- findValueë¥¼ ì‚¬ìš©í•˜ë©´ ëª‡ì¤‘ì˜ Json Dataë„ ì—¬ëŸ¬ë²ˆ get í•˜ì—¬ ê°€ì ¸ì˜¤ê±°ë‚˜ Arrayë¡œ ë§Œë“¤ì–´ êº¼ë‚¼ í•„ìš” ì—†ì´ ë°”ë¡œ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤.

â˜ï¸ .toString() ìœ¼ë¡œ ê°’ì„ êº¼ë‚´ê²Œ ë˜ë©´ "text"ì™€ ê°™ì´ êº¼ë‚´ì§€ê¸° ë•Œë¬¸ findValueAsText() ë˜ëŠ” .asText(), .textValue()ë¥¼ ì‚¬ìš©í•´ êº¼ë‚´ì•¼ textë¼ëŠ” ê°’ìœ¼ë¡œ êº¼ë‚¼ ìˆ˜ ìˆë‹¤.

