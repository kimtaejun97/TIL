# üîë ÌôúÏö© ÏÜåÍ∞ú.
> ### Ïä§ÌîÑÎßÅ Î∂ÄÌä∏ ÌïµÏã¨ Í∏∞Îä•.
> > - SpringApplication
> > - Ïô∏Î∂Ä ÏÑ§Ï†ï
> > - ÌîÑÎ°úÌååÏùº
> > - Î°úÍπÖ
> > - ÌÖåÏä§Ìä∏
> > - Spring-Dev-Tools

> ### Í∞ÅÏ¢Ö Í∏∞Ïà† Ïó∞Îèô
> > - Ïä§ÌîÑÎßÅ Ïõπ MVC
> > - Ïä§ÎßÅ Îç∞Ïù¥ÌÑ∞
> > - Ïä§ÌîÑÎßÅ ÏãúÌÅêÎ¶¨Ìã∞
> > - REST API ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏

# üìú Î™©Ï∞®
****
- #### [SpringApplication](#-springapplication)
- #### [Ïô∏Î∂Ä ÏÑ§Ï†ï](#-Ïô∏Î∂Ä-ÏÑ§Ï†ï)
- #### [Profile](#-profile)
- #### [Logging](#-logging)
- #### [Test](#-test)





# üìå SpringApplication
****
- ### FailureAnalizer : Ïò§Î•ò Î©îÏãúÏßÄ Ïª§Ïä§ÌÖÄ.
  

- ### Î∞∞ÎÑà
> - resourceÏóê banner.txt | gif | jpg | png Î•º Ï∂îÍ∞ÄÌïòÏó¨ Î≥ÄÍ≤Ω.
> - spring.banner.location ÏùÑ Ïù¥Ïö©ÌïòÏó¨ bannerÌååÏùº ÏúÑÏπò ÏÑ§Ï†ï Í∞ÄÎä•.
> - ${spring-boot.version} Îì±Ïùò Î≥ÄÏàòÎ•º ÏÇ¨Ïö©Ìï† Ïàò ÏûàÎã§.
> - Banner ÌÅ¥ÎûòÏä§Î•º Íµ¨ÌòÑÌïòÍ≥† SpringApplicaiton.setBanner()Î°ú ÏÑ§Ï†ï Í∞ÄÎä•.
> - SpringApplication.setBannerMode(Banner.Mode.OFF)

- ### SpringApplicationBuilder()
```java
new SpringApplicationBuilder()
    .sources(SpringApplication.class)
    .run(args);
```

- ### ApplicationEvents

```java
@Component
public class SampleListener implements ApplicationListener<ApplicationStartingEvent> {

    @Override
    public void onApplicationEvent(ApplicationStartingEvent applicationStartingEvent) {
        System.out.println("==========================");
        System.out.println("Application is Starting");
        System.out.println("==========================");
    }
}
```
> ApplicationContextÍ∞Ä ÎßåÎì§Ïñ¥ÏßÄÍ∏∞ Ï†ÑÏùò Ïù¥Î≤§Ìä∏ -> BeanÏúºÎ°ú Îì±Î°ùÌï¥ÎèÑ ListenerÍ∞Ä ÎèôÏûëÌïòÏßÄ ÏïäÎäîÎã§.


```java
SpringApplication app = new SpringApplication(ApplicationeventsApplication.class);
        app.addListeners(new SampleListener());
        app.run(args);
```
> ListenerÎ•º ÏàòÎèôÏúºÎ°ú Ï∂îÍ∞ÄÌï¥Ï§ÄÎã§.


- ### WebApplicationType ÏÑ§Ï†ï.
```java
SpringApplication app = new SpringApplication(ApplicationeventsApplication.class);
app.setWebApplicationType();
```
> - WebApplicationType.SERVELET : WebMVC   
> - WebApplicationType.REACTIVE : WebMVCÍ∞Ä ÏóÜÍ≥† WebFluxÎßå Ï°¥Ïû¨Ìï† Îïå.     
> - WebApplicationType.NONE : Îëò Îã§ ÏóÜÏùÑ Îïå.


- ### Ïï†ÌîåÎ¶¨ÏºÄÏù¥ÏÖò argument ÏÇ¨Ïö©ÌïòÍ∏∞.
> - Program arguments : --

```java
@Component
public class PrintArgs {

    public PrintArgs(ApplicationArguments applicationArguments){
        System.out.println(applicationArguments.containsOption("bar"));
    }
}
```
> ‚òùÔ∏è BeanÏóê ÏÉùÏÑ±ÏûêÍ∞Ä ÌïúÍ∞úÍ≥†, Í∑∏ ÏÉùÏÑ±ÏûêÏùò ÌååÎùºÎØ∏ÌÑ∞Í∞Ä BeanÏùº Í≤ΩÏö∞ ÏûêÎèôÏúºÎ°ú Ï£ºÏûÖ. 


- ### Ïï†ÌîåÎ¶¨ÏºÄÏù¥ÏÖò Ïã§Ìñâ ÌõÑ Ïã§Ìñâ (ApplicaiontRunner)
> - implements ApplicationRunner   
> - @Order()Î°ú Ïö∞ÏÑ†ÏàúÏúÑ Í∞ÄÎä•.



# üìå Ïô∏Î∂Ä ÏÑ§Ï†ï
****
- ### ÏÇ¨Ïö©Ìï† Ïàò ÏûàÎäî Ïô∏Î∂Ä ÏÑ§Ï†ï
> - properties
> - YAML
> - ÌôòÍ≤Ω Î≥ÄÏàò
> - Ïª§Îß®Îìú ÎùºÏù∏ argument

- ### ‚òùÔ∏è ÌîÑÎ°úÌçºÌã∞ Ïö∞ÏÑ†ÏàúÏúÑ
> 1. Ïú†Ï†Ä Ìôà ÎîîÎ†âÌÜ†Î¶¨Ïóê ÏûàÎäî spring-boot-dev-tools.properties
> 2. ÌÖåÏä§Ìä∏Ïóê ÏûàÎäî @TestPropertySource
> ```java
>- @TestPropertySource(locations = "classpath:/test.properties")
>``` 
>
> 3. @SpringBootTest Ïï†ÎÖ∏ÌÖåÏù¥ÏÖòÏùò properties Ïï†Ìä∏Î¶¨Î∑∞Ìä∏.
> ```java
>- @SpringBootTest(properties = "bigave.name=kimtaejun2")
>``` 
> 4. Ïª§Îß®ÎìúÎùºÏù∏ argument
> ``` - java -jar ... --bigave.name=kim ```
> 5. SPRING_APPLICATION_JSON(ÌôòÍ≤Ω Î≥ÄÏàò ÎòêÎäî ÏãúÏä§ÌÖú ÌîÑÎ°úÌçºÌã∞Ïóê Îì§Ïñ¥ÏûàÎäî ÌîÑÎ°úÌçºÌã∞)
> 6. ServletConfig ÌååÎùºÎØ∏ÌÑ∞.
> 7. ServletContext ÌååÎùºÎØ∏ÌÑ∞.
> 8. java:comp/env JNDI Ïï†Ìä∏Î¶¨Î∑∞Ìä∏.
> 9. System.getProperties() ÏûêÎ∞î ÏãúÏä§ÌÖú ÌîÑÎ°úÌçºÌã∞.
> 10. OS ÌôòÍ≤Ω Î≥ÄÏàò
> 11. RandomValuePropertySource ( ${random.int[start,end]})
> 12. JAR Î∞ñÏóê ÏûàÎäî ÌäπÏ†ï ÌîÑÎ°úÌååÏùºÏö© application.properties
> 13. JAR ÏïàÏóê ÏûàÎäî ÌäπÏ†ï ÌîÑÎ°úÌååÏùºÏö© application.properties
> 14. JAR Î∞ñÏóê ÏûàÎäî application.properties
> 15. JAR ÏïàÏóê ÏûàÎäî application.properties
> 16. @PropertySource



> üëé test ÎîîÎ†âÌÜ†Î¶¨Ïóê application.propertiesÎ•º ÏÉùÏÑ±ÌïòÎ©¥, Test ÏàòÌñâÏãú Î®ºÏ†Ä mainÏùÑ ÎπåÎìúÌïòÏó¨ ÌÅ¥ÎûòÏä§ Ìå®Ïä§Ïóê Ï∂îÍ∞ÄÌïòÍ≥†,
> testÎ•º ÎπåÎìúÌïòÏó¨ Ï∂îÍ∞ÄÌïòÍ∏∞ ÎïåÎ¨∏Ïóê mainÏùò properties ÌååÏùºÏù¥  testÏùò properties ÌååÏùºÎ°ú ÎçÆÏñ¥ÏßÑÎã§.     
> Ïù¥ Îïå, test propertiesÏóêÏÑú main propertiesÏùò Í∞íÏùÑ ÎàÑÎùΩÌïòÍ≥†, Ìï¥Îãπ Í∞íÏùÑ mainÏù¥ÎÇò testÏóêÏÑú ÏÇ¨Ïö©ÌïòÍ≤å ÎêòÎ©¥ ÎπåÎìúÌïòÎäî Í≥ºÏ†ïÏóêÏÑú Í∞íÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏñ¥ Ïò§Î•òÍ∞Ä Î∞úÏÉùÌïúÎã§.

> üëç test properties ÌååÏùºÏùÑ ÏÉùÏÑ±ÌïòÏßÄ ÏïäÍ≥† ,@TestPropertySource ÎÇò, @SpringBootTestÏùò properties ÏÜçÏÑ±ÏùÑ ÏÇ¨Ïö©ÌïúÎã§.

> - application.properties Ïö∞ÏÑ†ÏàúÏúÑ.
> > 1. file:./config/ (project root/config/)
> > 2. file:./
> > 3. classpath:/config/
> > 4. classpath:/

- ### ÌÉÄÏûÖ-ÏÑ∏Ïù¥ÌîÑ ÌîÑÎ°úÌçºÌã∞ @ConfigurationProperties
> - Ïó¨Îü¨ ÌîÑÎ°úÌçºÌã∞Î•º Î¨∂Ïñ¥ÏÑú ÏùΩÏñ¥Ïò¨ Ïàò ÏûàÏùå.
> - ÎπàÏúºÎ°ú Îì±Î°ùÌï¥ÏÑú Îã§Î•∏ ÎπàÏóê Ï£ºÏûÖÌï† Ïàò ÏûàÏùå.
> > - @EnableConfigurationProperties(properties.class)
> > - @Component
> > - @Bean
> - ÏúµÌÜµÏÑ± ÏûàÎäî Î∞îÏù∏Îî©(ÌîÑÎ°úÌçºÌã∞Î•º ÎÑ§Ïù¥Î∞ç Ìï† Îïå ÏïÑÎûòÎäî Î™®Îëê Í∞ôÍ≤å Î∞îÏù∏Îî© Îê®.)
> > - context-path(ÏºÄÎ∞•)
> > - context_path(Ïñ∏ÎçîÏä§ÏΩîÏñ¥)
> > - contextPath(Ïπ¥Î©ú)
> > - CONTEXTPATH
> - ÌîÑÎ°úÌçºÌã∞ ÌÉÄÏûÖ Ïª®Î≤ÑÏ†Ñ(String(100) - int(100) , String(25s) - Duration(PT25s) ...)
> - ÌîÑÎ°úÌçºÌã∞ Í∞í Í≤ÄÏ¶ù(@Validated, JSR-303(@NotNull, ...))
```properties
bigave.name = taejun
bigave.age = ${random.int[0,100]} 
```

```java
@Component
@ConfigurationProperties("bigave") //key 
public class BigaveProperties {

    String name;
    int age;

    public int getAge() {
        return age;
    }
    public void setAge(int age) {
        this.age = age;
    }
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
}
```

```xml
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-configuration-processor</artifactId>
    <optional>true</optional>
</dependency>
```
> @ConfigurationPropertiesÎ•º ÏÇ¨Ïö©ÌïòÍ∏∞ ÏúÑÌïú ÏùòÏ°¥ÏÑ±.


```java
@Autowired
BigaveProperties bigaveProperties;

@Override
public void run(ApplicationArguments args) throws Exception {
        System.out.println(bigaveProperties.getName);
        System.out.println(bigaveProperties.getAge);
}
```


# üìå Profile
****

> - @Profile Ïï†ÎÖ∏ÌÖåÏù¥ÏÖòÏùÄ Ïñ¥ÎîîÏóê Î∂ôÏù¥ÎÇò?
>```
> @Configuration
> @Component
>```
> - ÌîÑÎ°ú ÌååÏùº ÌôúÏÑ±Ìôî.
>```properties
>spring.profiles.active= ...
>```
> - ÌîÑÎ°ú ÌååÏùºÏö© ÌîÑÎ°úÌçºÌã∞
>```
> application-{profile}.properties
>```
> - ÌîÑÎ°ú ÌååÏùº Ï∂îÍ∞Ä.
>```properties
>spring.profiles.include= ...
>```


```java
@Profile("prod")
@Configuration
public class BaseConfiguration {

    @Bean
    public String hello(){
        return "hello prod";
    }
}
```

```properties
spring.profiles.active=prod
spring.profiles.include=proddb
```
> ÌîÑÎ°úÌååÏùºÏùÄ prodÎ°ú ÏÑ§Ï†ï, Ìï¥Îãπ properties ÌååÏùºÏù¥ ÏùΩÌûê Îïå proddbÎ•º Ï∂îÍ∞ÄÌïúÎã§.


![img_5.png](img_5.png)
> - Ïö∞ÏÑ†ÏàúÏúÑ
> > avtivate ÌîÑÎ°úÌååÏùº ÌîÑÎ°úÌçºÌã∞ > include Îêú ÌîÑÎ°úÌååÏùº ÌîÑÎ°úÌçºÌã∞(Îä¶Í≤å Ï∂îÍ∞ÄÎêú Í≤ÉÏù¥ ÎçÆÏñ¥ ÏîÄ.) > application.properties