> ì´ë¯¸ì§€ ì¶œì²˜: ìë°” ORM í‘œì¤€ JPA í”„ë¡œê·¸ë˜ë° - ê¸°ë³¸í¸ ê¹€ì˜í•œë‹˜.

### ğŸ¤” SQL ì¤‘ì‹¬ì ì¸ ê°œë°œì˜ ë¬¸ì œ.
> - ë°˜ë³µì ì¸ SQL ì‘ì„± ë° ìœ ì§€ë³´ìˆ˜ê°€ í˜ë“¤ë‹¤.
> - ê°ì²´, ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ì˜ íŒ¨ëŸ¬ë‹¤ì„ ë¶ˆì¼ì¹˜.
> - ìƒì†, ì—°ê´€ê´€ê³„, ë°ì´í„° íƒ€ì…, ë°ì´í„° ì‹ë³„ ë°©ë²• ë“±ì˜ ì°¨ì´.

> - ì²˜ìŒ ì‹¤í–‰í•˜ëŠ” SQLì— ë”°ë¼ íƒìƒ‰ ë²”ìœ„ê°€ ê²°ì •ëœë‹¤.
> > - ì²˜ìŒì— memberì˜ teamë§Œ joiní•˜ì˜€ë‹¤ë©´ teamì€ ì–»ì–´ì˜¬ ìˆ˜ ìˆì§€ë§Œ joiní•˜ì§€ ì•Šì€ orderì— ëŒ€í•œ ì •ë³´ë¥¼ êº¼ë‚¼ ìˆ˜ ì—†ë‹¤.
> > - ì—”í‹°í‹° ì‹ ë¢° ë¬¸ì œê°€ ë°œìƒí•œë‹¤. ì–´ë–¤ ì •ë³´ë¥¼ ê°€ì ¸ì™”ëŠ”ì§€ ì•Œ ìˆ˜ ì—†ê¸° ë•Œë¬¸ì—, í•¨ë¶€ë¡œ ë°ì´í„°ë¥¼ êº¼ë‚¼ ìˆ˜ ì—†ê²Œëœë‹¤.

> - ê°ì²´ ë‹µê²Œ ëª¨ë¸ë§ì„ í•  ìˆ˜ë¡ ë§¤í•‘ ì‘ì—…ë§Œ ëŠ˜ì–´ë‚œë‹¤.(ìƒì†, equals ë“± ..)
> > ğŸ¤” ê°ì²´ë¥¼ ìë°” ì»¬ë ‰ì…˜ì— ì €ì¥ í•˜ë“¯ì´ DBì— ì €ì¥ í•  ìˆ˜ ì—†ì„ê¹Œ?   
> > -> JPAì˜ ë“±ì¥.


# ğŸ“Œ JPA?
****
> - Java Persistence API
> - ìë°” ì§„ì˜ì˜ ORM ê¸°ìˆ  í‘œì¤€   
> - ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ JDBC ì‚¬ì´ì—ì„œ ë™ì‘.
> 
> ğŸ¤” ORM? Object Relational Mapping:
> ê°ì²´ëŠ” ê°ì²´ëŒ€ë¡œ, ê´€ê³„í˜• DBëŠ” ê´€ê³„í˜• DB ëŒ€ë¡œ ì„¤ê³„, ORM í”„ë ˆì„ì›Œí¬ê°€ ì¤‘ê°„ì—ì„œ ë§¤í•‘.

- JPAëŠ” ì¸í„°í˜ì´ìŠ¤ì˜ ëª¨ìŒ
- JPA 2.1 í‘œì¤€ ëª…ì„¸ë¥¼ êµ¬í˜„í•œ êµ¬í˜„ì²´ :Hibernate, EclipseLink, DataNucleus

## ğŸ§ JPAë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ 
> SQL ì¤‘ì‹¬ ê°œë°œì—ì„œ ê°ì²´ ì¤‘ì‹¬ ê°œë°œë¡œ.
â„â„â„
- ### â˜ï¸ ìƒì‚°ì„±
    - CRUD ë©”ì†Œë“œê°€ ê°„ë‹¨í•œë‹¤(persist(), find(), set*(), remove())

- ### â˜ï¸ ìœ ì§€ë³´ìˆ˜
    - ê¸°ì¡´: í•„ë“œ ìˆ˜ì • ëª¨ë“  SQL ìˆ˜ì •.
    - JPA: í•„ë“œë§Œ ì¶”ê°€í•˜ë©´ ëœë‹¤. SQLì€ JPAì—ì„œ ê´€ë¦¬.
    
- ### â˜ï¸ íŒ¨ëŸ¬ë‹¤ì„ì˜ ë¶ˆì¼ì¹˜ í•´ê²°
  > âœï¸ ìƒì†
  > - ì €ì¥: í•˜ë‚˜ì˜ ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•˜ë©´ ìƒìœ„ í´ë˜ìŠ¤ì™€ í•˜ìœ„ í´ë˜ìŠ¤ë¥¼ ë‚˜ëˆ„ì–´ ì¿¼ë¦¬ë¥¼ ìƒì„±, ê°ê° ë°ì´í„°ë¥¼ ì €ì¥í•œë‹¤.
  > - ì¡°íšŒ: í•„ìš”í•œ ë°ì´í„°ë¥¼ ìë™ìœ¼ë¡œ ì¡°ì¸í•´ì„œ ê°€ì ¸ì˜¨ë‹¤.   
  > 
  > âœï¸ ì—°ê´€ê´€ê³„, ê°ì²´ ê·¸ë˜í”„ íƒìƒ‰
  > - ìë°” ì»¬ë ‰ì…˜ì„ ì‚¬ìš©í•˜ë“¯ì´ ë°ì´í„°ë¥¼ ì €ì¥í•˜ê³ , ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤.
  > - ì§€ì—°ë¡œë”©ì„ ì´ìš©í•œ ììœ ë¡œìš´ ê°ì²´ ê·¸ë˜í”„ íƒìƒ‰ -> ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ì—”í‹°í‹°
  > 
  > âœï¸ ì—”í‹°í‹°ì˜ ë¹„êµ
  > - ê¸°ì¡´: ë™ì¼í•œ ë°ì´í„°ë¥¼ ê°€ì¡Œë”ë¼ë„ ìƒˆë¡œ ê°ì²´ë¥¼ ìƒì„±í•˜ê¸° ë•Œë¬¸ì— '==' ë¹„êµë¥¼ í–ˆì„ ë•Œ ë‹¤ë¥¸ ê°ì²´ë¡œ ë‚˜ì˜¤ê²Œ ëœë‹¤. equalsì˜ ì¬ì •ì˜ í•„ìš”.
  > - JPA: ë™ì¼í•œ íŠ¸ë™ì­ì…˜ì—ì„œ ì¡°íšŒí•œ ì—”í‹°í‹°ëŠ” ê°™ìŒì„ ë³´ì¥í•œë‹¤.
  > 
  > âœï¸ JPAì˜ ì„±ëŠ¥ ìµœì í™”
  > - 1ì°¨ ìºì‹œì™€ ë™ì¼ì„± ë³´ì¥
  >     - ê°™ì€ íŠ¸ë™ì­ì…˜ ì•ˆì—ì„œëŠ” ê°™ì€ ì—”í‹°í‹°ë¥¼ ë°˜í™˜ -> ì•½ê°„ì˜ ì¡°íšŒ ì„±ëŠ¥ í–¥ìƒ
  >     - DB Isolation Levelì´ REad Commit ì´ì–´ë„ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ Repeatable Read ë³´ì¥.
  >     ```java
  >     Member m1 = jpa.find(Member.class, 0); // SQL
  >     Member m2 = jpa.find(Member.class, 0); // Cache
  >     m1 == m2 // true
  >     ```
  >   ğŸ– ê²°ê³¼ì ìœ¼ë¡œ SQLì€ í•œë²ˆë§Œ ì‹¤í–‰ëœë‹¤.
  >  
  > âœï¸ íŠ¸ëœì­ì…˜ì„ ì§€ì›í•˜ëŠ” ì“°ê¸° ì§€ì—°
  > - íŠ¸ëœì­ì…˜ì„ ì»¤ë°‹í•  ë•Œ ê¹Œì§€ INSERT SQLì„ ëª¨ìŒ.
  > - JDBC BATCH SQL ê¸°ëŠ¥ì„ ì‚¬ìš©í•´ì„œ í•œë²ˆì— SQL ì „ì†¡.
  > - ë„¤íŠ¸ì›Œí¬ ì „ì†¡ íšŸìˆ˜ë¥¼ ì¤„ì¼ ìˆ˜ ìˆë‹¤.
  >   ```java
  >   transaction.begin(); // íŠ¸ëœì­ì…˜ ì‹œì‘
  >   em.persist(A);
  >   em.persist(B);
  >   em.persist(C);
  >   transaction.commit() // íŠ¸ëœì­ì…˜ ì»¤ë°‹
  >   ```
  > âœï¸ ì§€ì—° ë¡œë”©, ì¦‰ì‹œ ë¡œë”©
  > - ğŸ– ì§€ì—° ë¡œë”© : ê°ì²´ê°€ ì‹¤ì œ ì‚¬ìš©ë  ë•Œ ë¡œë”©.(ì¿¼ë¦¬ê°€ ì¦ê°€í•  ìˆ˜ ìˆë‹¤.)
  > - ğŸ– ì¦‰ì‹œ ë¡œë”©: JOIN SQLë¡œ í•œë²ˆì— ì—°ê´€ëœ ê°ì²´ê¹Œì§€ <strong>ë¯¸ë¦¬ ì¡°íšŒ.</strong>
  > - JPAì—ì„œëŠ” ì˜µì…˜ìœ¼ë¡œ ì„¤ì •ì´ ê°€ëŠ¥í•˜ë‹¤.
  > - í•­ìƒ í•¨ê»˜ ë¡œë”©í•´ì•¼ í•˜ëŠ” ë°ì´í„°ê°€ ìˆë‹¤ -> ì¦‰ì‹œ ë¡œë”©ì´ ìœ ë¦¬í•  ìˆ˜ ìˆë‹¤.(ì¿¼ë¦¬ ìˆ˜ê°€ ì ì–´ì§„ë‹¤.)
  > 

# ğŸ“Œ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ (Persistence Context)
***
> - JPAë¥¼ ì´í•´í•˜ê¸°ì— ê°€ì¥ ì¤‘ìš” ê°œë….
> - ì—”í‹°í‹°ë¥¼ ì˜êµ¬ ì €ì¥í•˜ëŠ” í™˜ê²½ ```EntityManager.persist(entity)```
> - J2SE í™˜ê²½ : EntityManager,PersistenceContextëŠ” 1:1
> - J2EE, springê³¼ ê°™ì€ ì»¨í…Œì´ë„ˆ í™˜ê²½ : N:1

### â˜ï¸ ì—”í‹°í‹°ì˜ ìƒëª… ì£¼ê¸°
![img_1.png](img_1.png)

### â˜ï¸ ë¹„ì˜ì†
- ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì™€ ì•„ë¬´ ê´€ê³„ê°€ ì—†ëŠ” ìƒíƒœ, (ìƒˆë¡œ ìƒì„±ëœ ê°ì²´ ë“±)

### â˜ï¸ ì˜ì†(persist)
- ê°ì²´ë¥¼ ì €ì¥í•œ ìƒíƒœ ```em.persist(entity)```
- ê°ì²´ë¥¼ find() ```em.find(entity.class, entity)```

### â˜ï¸ ì¤€ì˜ì†(detached)
- ì—”í‹°í‹°ê°€ ì˜ì†ì„± ì»¨í…íŠ¸ìŠ¤ì—ì„œ ë¶„ë¦¬ëœ ìƒíƒœ. ```em.detach(entity)```
- ê°ì²´ë¥¼ ì‚­ì œí•œ ìƒíƒœ ```em.remove(entity)```
- ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ë¥¼ ì´ˆê¸°í™” ```em.clear()```
- ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ë¥¼ ì¢…ë£Œ ```em.close()```


## ğŸ§ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì˜ ì´ì 

  - ### â˜ï¸ 1ì°¨ ìºì‹œ
    ![img_2.png](img_2.png)
    > - ë™ì¼í•œ íŠ¸ëœì ì…˜ì—ì„œ ë‹¤ì‹œ ì¡°íšŒë¥¼ í•˜ë©´ ë¨¼ì € 1ì°¨ ìºì‹œì—ì„œ ì¡°íšŒ.
    > - ìºì‹œì— ì¡´ì¬í•˜ë©´ ìºì‹œì—ì„œ ê°€ì ¸ì˜¤ê³  ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©´ DBì—ì„œ ì¡°íšŒ, ìºì‹œì— ì €ì¥.
  
  - ### â˜ï¸ ì˜ì† ì—”í‹°í‹°ì˜ ë™ì¼ì„± ë³´ì¥
    > - ì—¬ëŸ¬ë²ˆ ì¡°íšŒí•˜ì—¬ ê°™ì€ ì—”í‹°í‹°ë¥¼ ê°€ì ¸ì˜¤ë©´ == ë™ì¼ì„± ë¹„êµ true
  
  - ### â˜ï¸ íŠ¸ëœì­ì…˜ì„ ì§€ì›í•˜ëŠ” ì“°ê¸° ì§€ì—°
    > - commit ë˜ëŠ” flush ì „ê¹Œì§€ ì“°ê¸°ì§€ì—° ì €ì¥ì†Œì— ìƒì„±ëœ sqlì„ ì €ì¥í•˜ë‹¤ê°€ í•œë²ˆì— ì „ì†¡.
    
  - ### â˜ï¸ ì—”í‹°í‹° ë³€ê²½ ê°ì§€.
    > - commit ì‹œì ì— flushê°€ ì‹¤í•´ë˜ë©° ìë™ìœ¼ë¡œ ì—”í‹°í‹° ë³€ê²½ ì‚¬í•­ì„ ê°ì§€(ì—”í‹°í‹°ì™€ ìŠ¤ëƒ…ìƒ· ë¹„êµ, ë”í‹° ì²´í‚¹)
    > - Update SQLì„ ìƒì„±, ì¿¼ë¦¬ ì „ì†¡.
    > 
    > ![img_3.png](img_3.png)
    > 

# ğŸ“Œ flush
****
- ë³€ê²½ ê°ì§€
- ìˆ˜ì •ëœ ì—”í‹°í‹° ì“°ê¸° ì§€ì—° SQL ì €ì¥ì†Œì— ë“±ë¡
- ì“°ê¸°ì§€ì—° SQL ì €ì¥ì†Œì˜ ì¿¼ë¦¬ë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì— ì „ì†¡(ë“±ë¡, ìˆ˜ì •, ì‚­ì œ)
- ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ë¥¼ ë¹„ìš°ì§€ëŠ” ì•ŠëŠ”ë‹¤. ë™ê¸°í™”ë§Œ. (ì“°ê¸° ì§€ì—° ì €ì¥ì†ŒëŠ” ì „ì†¡ í›„ ë¹„ìš´ë‹¤)

> 1. ì§ì ‘ í˜¸ì¶œ : ```em.flush()```
> 2. íŠ¸ëœì­ì…˜ ì»¤ë°‹ : flush ìë™ í˜¸ì¶œ.
> 3. JPQL ì¿¼ë¦¬ ì‹¤í–‰ : flush ìë™ í˜¸ì¶œ.
> > - FlushModeType.AUTO (defualt)
> > - FlushModeType.COMMIT (commit í• ë•Œë§Œ ì‹¤í–‰)


# ğŸ“Œ ì—”í‹°í‹° ë§¤í•‘
*** 
### â˜ï¸ ê°ì²´ì™€ í…Œì´ë¸” ë§¤í•‘: @Entity, @Table
- #### @Entity : JPAê°€ ê´€ë¦¬í•˜ëŠ” ì—”í‹°í‹°. í•„ìˆ˜
  - ê¸°ë³¸ ìƒì„±ì í•„ìˆ˜ (public or protected) : ë¦¬í”Œë™ì…˜ê³¼ ê°™ì€ ê¸°ìˆ ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´.
  - final, enum, interface, inner í´ë˜ìŠ¤ëŠ” ì—”í‹°í‹°ë¡œ ì‚¬ìš© ë¶ˆê°€.
  - ì €ì¥í•  í•„ë“œì— finalì„ ì‚¬ìš©í•˜ë©´ ì•ˆëœë‹¤.

- #### @Table
  - name: ë§¤í•‘í•  í…Œì´ë¸” ì´ë¦„ (defaultë¡œëŠ” ì—”í‹°í‹° ì´ë¦„ì„ ì‚¬ìš©) 
  
### â˜ï¸ í•„ë“œì™€ ì»¬ëŸ¼ ë§¤í•‘
 
  - #### @Column : ì»¬ëŸ¼ ë§¤í•‘
    > - name : í•„ë“œì™€ ë§¤í•‘í•  í…Œì´ë¸”ì˜ ì»¬ëŸ¼ ì´ë¦„ (default = ê°ì²´ì˜ í•„ë“œ ì´ë¦„)
    > - Insertable, updatable : ë“±ë¡, ë³€ê²½ ê°€ëŠ¥ ì—¬ë¶€. (default = true)
    > - nullable(DDL) : null ì œì•½ì¡°ê±´
    > - unique(DDL) : unique ì œì•½ì¡°ê±´, í•˜ì§€ë§Œ ì£¼ë¡œ @Tableì˜ uniqueConstraintsë¥¼ ì‚¬ìš©í•œë‹¤.(ì´ë¦„ì„ ì„¤ì •í•˜ê¸° ìœ„í•´)
    > - columnDefinition: ì»¬ëŸ¼ ì •ë³´ë¥¼ ì§ì ‘ ì¤„ ìˆ˜ ìˆë‹¤ ```columnDefinition = "varchar(100) default 'EMPTY'"```
    > - length : ë¬¸ì ê¸¸ì´ ì œì•½ì¡°ê±´, Stringì—ë§Œ ì‚¬ìš© (default = 255)
    > - precision, scale(DDL): BigDecimal, BigIntegerì—ì„œ ì‚¬ìš©, precisionì€ ì†Œìˆ˜ì ì„ í¬í•¨í•œ ìë¦¿ìˆ˜, scaleì€ ì†Œìˆ˜ì ì˜ ìë¦¬ìˆ˜ë¥¼ ëª…ì‹œí•œë‹¤. ```scale = 19```
    
  - #### @Temporal : ë‚ ì§œ íƒ€ì… ë§¤í•‘
    - java8 ì´í›„ë¶€í„°ëŠ” LocalDate, LocalDateTimeì„ ì‚¬ìš©í•˜ë©´ ìƒëµ ê°€ëŠ¥.
    ```
      @Temporal(TemporalType.TIMESTAMP) | DATE,TIME
      private Date createdDate
    ```
  - #### @Enumerated : enum íƒ€ì… ë§¤í•‘ ```@Enumerated(EnumType.STRING)```-> varchar(ì´ë¦„)
    - defalut = ORDINARY(íƒ€ì…ì˜ ìˆœì„œ) -> Integerë¡œ ë“¤ì–´ê°, ì•ì— ìƒˆë¡œìš´ Roleì„ ì¶”ê°€í•˜ê²Œë˜ë©´ ìˆœì„œê°€ ë°”ë€ŒëŠ” ìœ„í—˜ì„±ì´ ìˆë‹¤.
  - #### @Lob : ëŒ€ìš©ëŸ‰ ì»¨í…ì¸  
    - ë§¤í•‘í•˜ëŠ” ë°ì´í„°ê°€ ë¬¸ìë©´ CLOB, ë‚˜ë¨¸ì§€ëŠ” BLOB
  - #### @Transient : í•„ë“œë¥¼ DBì— ë§¤í•‘í•˜ì§€ ì•Šê² ë‹¤.

### â˜ï¸ ê¸°ë³¸í‚¤ ë§¤í•‘
  - @Id
  - @GeneratedValue : Id ìë™ ìƒì„± 
    - ```strategy = GenerationType.Identity``` : ê¸°ë³¸ í‚¤ ìƒì„±ì„ DBì— ìœ„ì„
    - ```strategy = GenerationType.SEQUENCE``` : Sequence Objectë¥¼ ë”°ë¡œ ë‘ê³  ê¸°ë³¸í‚¤ ìƒì„±ì„ ê´€ë¦¬.
      - í…Œì´ë¸” ë§ˆë‹¤ ë”°ë¡œ Sequence Object ë‘˜ ìˆ˜ë„ ìˆë‹¤.
        ```java
            @SequenceGenerator(
                name = "MEMBER_SEQ_GENERATOR",
                initialValue = 1, allocationSize = 1 /*(ì¦ê°€ í•˜ëŠ” ìˆ˜)*/)
      
            ...
            
            @GeneratedValue(strategy = Generationtype.SEQUENCE, generator = "MEMBER_SEQ_GENERATOR")
        ```
    - ```strategy = GenerationType.TABLE ``` : Sequence ì „ëµì„ í‰ë‚´ë‚¸ ê²ƒ, í‚¤ ìƒì„±ìš© í…Œì´ë¸”ì„ ë”°ë¡œ ë‘”ë‹¤.
        - ëª¨ë“  DBì— ì ìš©ì´ ê°€ëŠ¥í•˜ë‹¤ëŠ” ì¥ì ì´ ìˆìœ¼ë‚˜, ì„±ëŠ¥ ì´ìŠˆê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤.
        ```java
            @TableGenerator(
                name = "MEMBER_SEQ_GENERATOR",
                table = "MY_SEQUENCES",
                pkColumnValue = "MEMBER_SEQ", allocationSize = 1)
      
            ...
            
            @GeneratedValue(strategy = Generationtype.TABLE, generator = "MEMBER_SEQ_GENERATOR")
        ```
        - MY_SEQUENCES í…Œì´ë¸”ì´ ìƒì„±ë˜ê³  pk value = MEMBER_SEQ, next_val ì€ 1ì„ ê°€ì§€ëŠ” íˆ¬í”Œì´ ìƒì„±ëœë‹¤. next_val ê°’ì„ ê³„ì† ì¦ê°€ ì‹œí‚¨ë‹¤.
    
- #### ğŸ”‘ ê¶Œì¥í•˜ëŠ” ê¸°ë³¸ í‚¤ ì œì•½ ì¡°ê±´
    - ê¸°ë³¸í‚¤ ì œì•½ ì¡°ê±´: null ì•„ë‹˜. ìœ ì¼, ë³€í•˜ë©´ ì•ˆë¨.
    - ìœ„ì˜ ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ìì—°í‚¤ëŠ” ì°¾ê¸° ì–´ë µë‹¤. ëŒ€ì²´í‚¤ë¥¼ ì‚¬ìš©(Sequence, UUID ë“±)
    - ê¶Œì¥ : Long, ëŒ€ì²´í‚¤ + í‚¤ ìƒì„± ì „ëµ ì‚¬ìš©.
    

- #### ğŸ¤” Identity ì „ëµì˜ íŠ¹ì´ì 
     - ì˜ì†ì„± ê´€ë¦¬ë¥¼ í•˜ê¸°ìœ„í•´ì„œëŠ” pk ì •ë³´ê°€ í•„ìš”í•˜ë‹¤. í•˜ì§€ë§Œ Identity ì „ëµì—ì„œëŠ” DBì— ì €ì¥í• ë•Œ idë¥¼ ìƒì„±í•˜ê¸° ë•Œë¬¸ì—, persistì‹œì ì— idê°’ì´ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤.
       ë•Œë¬¸ì— ì›ë˜ëŠ” commit ì‹œì ì— ì¿¼ë¦¬ë¥¼ ì „ë‹¬í•˜ì§€ë§Œ Identity ì „ëµì—ì„œëŠ” íŠ¹ì´í•˜ê²Œ persist ì‹œì ì— ì¿¼ë¦¬ë¥¼ ì „ë‹¬í•œë‹¤.
   
- #### ğŸ¤” Sequence ì „ëµì˜ íŠ¹ì´ì .
    - persistë¥¼ ì‹¤í–‰í•˜ë©´ pkë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•´ DBì˜ Sequence Objectì—ì„œ ê°’ì„ ì–»ì–´ì˜¨ í›„ ì—”í‹°í‹°ì— ë„£ì–´ì£¼ê³  ì˜ì†ì„± ì»¨í…ŒìŠ¤íŠ¸ì— ì €ì¥í•œë‹¤.
    - allocationSizeë¥¼ ì´ìš©í•œ ì„±ëŠ¥ ìµœì í™”:  defaultê°’ì´ 50ìœ¼ë¡œ ì„¤ì •ë˜ì–´ ìˆë‹¤. í•œë²ˆ ê°’ì„ ì–»ì–´ì˜¬ ë•Œ DBì—ì„œëŠ” 50ì´ ì¦ê°€í•˜ê²Œ ë˜ì–´ìˆìœ¼ë¯€ë¡œ.
    ê·¸ ë‹¤ìŒë¶€í„°ëŠ” id ê°’ì´ 51ì´ ë ë•Œê¹Œì§€ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œëŠ” ë‹¤ì‹œ ê°’ì„ ì–»ì–´ì˜¤ì§€ ì•Šê³  ë©”ëª¨ë¦¬ì—ì„œ í˜¸ì¶œí•˜ì—¬ ì‚¬ìš©í•œë‹¤. ì¶©ë¶„í•œ ê°’ì„ ì‚¬ìš©í•´ë„ ë˜ì§€ë§Œ ì›¹ ì„œë²„ë¥¼ ë‚´ë¦¬ëŠ” ì‹œì ì— ì‚¬ë¼ì§€ê¸° ë•Œë¬¸ì— ì ì ˆí•œ ê°’ì„ ì‚¬ìš©í•œë‹¤.
      

     ğŸ– Spring Boot ì—ì„œëŠ” ë„¤ì´ë°ì˜ ê´€ë¡€ë¥¼ ì†Œë¬¸ì ì–¸ë”ìŠ¤ì½”ì–´ë¥¼ ì‚¬ìš©í•œë‹¤. createdDate -> create_date 

### ğŸ‘ í…Œì´ë¸”ì˜ ì™¸ë˜í‚¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ì‹
```java
public class Order {

    @Id @GeneratedValue
    @Column(name = "order_id")
    private Long id;

    private Long memberId;

    private LocalDateTime orderDate;

    @Enumerated(EnumType.STRING)
    private OrderStatus status;
}
```
> - ìœ„ì˜ ì˜ˆì œì²˜ëŸ¼ ì£¼ë¬¸ìì˜ memberIdë¥¼ ì™¸ë˜í‚¤ë¡œ ì €ì¥í•˜ê²Œ ë˜ë©´ ì£¼ë¬¸í•œ ì‚¬ëŒì„ ì°¾ëŠ” ê³¼ì •ì—ì„œ ê°ì²´ ê·¸ë˜í”„ íƒìƒ‰ì´ ë¶ˆê°€ëŠ¥í•´ ê°ì²´ì§€í–¥ìŠ¤ëŸ½ì§€ ì•Šë‹¤.
```java
Order order = em.find(Order.class, orderId);
Long memberId = order.getMemberId();
Member member = em.find(Member.class, memberId);
```
> - í•´ê²° : ì—°ê´€ê´€ê³„ ë§¤í•‘ì„ ì´ìš©. fieldì— Memberë¥¼ ë‘ê³  order.getMember() ì²˜ëŸ¼ ì£¼ë¬¸ìë¥¼ ì°¾ì„ ìˆ˜ ìˆë‹¤.


# ğŸ“Œ ì—°ê´€ê´€ê³„ ë§¤í•‘
***
- ë°©í–¥ : ë‹¨ë°©í–¥, ì–‘ë°©í–¥
- ë‹¤ì¤‘ì„± : ë‹¤ëŒ€ì¼, ì¼ëŒ€ë‹¤, ì¼ëŒ€ì¼, ë‹¤ëŒ€ë‹¤
- ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ : ê°ì²´ ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ëŠ” ê´€ë¦¬ ì£¼ì¸ì´ í•„ìš”í•˜ë‹¤.

### â˜ï¸ ë‹¨ë°©í–¥ ì—°ê´€ê´€ê³„
```java
public class Member {

    @Id @GeneratedValue
    @Column(name = "member_id")
    private Long id;

    private String name;

    @ManyToOne
    @JoinColumn(name = "team_id")
    private Team team;
```

```java
Member member = em.find(Member.class, 1L);
Team team = member.getTeam();
```


### â˜ï¸ ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„
```java
public class Team {

    @Id
    @GeneratedValue
    @Column(name = "team_id")
    private Long id;

    private String teamName;

    @OneToMany(mappedBy = "team")
    private List<Member> members = new ArrayList<>();
}
```
- Memberì˜ @ManyToOne ì— ëŒ€ì‘ë˜ëŠ” @OneToMany ì‚¬ìš©.
- mappedByë¥¼ ì‚¬ìš©í•˜ì—¬ ì–´ë–¤ê²ƒê³¼ ë§¤í•‘ëœ ê²ƒì¸ì§€ ì•Œë ¤ì¤Œ.
- ê·¸ëŸ¬ë‚˜ ê°ì²´ëŠ” ê°€ê¸‰ì ì´ë©´ ë‹¨ë°©í–¥ì¸ ê²ƒì´ ì¢‹ë‹¤.
- ì–‘ë°©í–¥ ë§¤í•‘ì€ ë°˜ëŒ€ ë°©í–¥ìœ¼ë¡œ ì¡°íšŒê°€ ì¶”ê°€ëœ ê²ƒ ë¿.
- ë‹¨ë°©í–¥ ë§¤í•‘ì„ ì˜ í•˜ê³  ì–‘ë°©í–¥ì€ í•„ìš”í•  ë•Œ ì¶”ê°€.(ì—­ë°©í–¥ìœ¼ë¡œ íƒìƒ‰í•  ì¼ì´ ë§ì„ ë•Œ, í…Œì´ë¸”ì— ì˜í–¥ì´ ê°€ì§€ ì•ŠëŠ”ë‹¤.)

### ğŸ¤” ê°ì²´ì™€ í…Œì´ë¸”ì´ ê´€ê³„ë¥¼ ë§ºëŠ” ì°¨ì´
> - ê°ì²´ : ì‚¬ì‹¤ìƒ íŒ€ -> ë©¤ë²„, ë©¤ë²„ -> íŒ€ ì˜ ë‹¨ë°©í–¥ ì—°ê´€ê´€ê³„ê°€ 2ê°œ ìˆëŠ”ê²ƒ.
> - í…Œì´ë¸” : ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ í•˜ë‚˜!

> ğŸ– ê°ì²´ ê´€ê³„ì—ì„œ ë©¤ë²„ì˜ íŒ€ì„ ë°”ê¾¸ë ¤ë©´ ë©¤ë²„ì˜ íŒ€ì„ ë°”ê¿”ì•¼ í•  ì§€, íŒ€ì˜ ë©¤ë²„ë¥¼ ë°”ê¿”ì•¼í•  ì§€ ì•Œ ìˆ˜ ì—†ë‹¤. ë•Œë¬¸ì— ë‘˜ì¤‘ í•˜ë‚˜ì—ì„œ ì™¸ë˜ í‚¤ë¥¼ ê´€ë¦¬í•´ì•¼ í•œë‹¤.    
> -> ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸

### ğŸ”‘ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸
- ì–‘ë°©í–¥ ë§¤í•‘ ê·œì¹™
    - ê°ì²´ì˜ ë‘ ê´€ê³„ì¤‘ í•˜ë‚˜ë¥¼ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ìœ¼ë¡œ ì§€ì •.
    - ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ì´ ì™¸ë˜í‚¤ë¥¼ ê°€ì§„ë‹¤.
    - <strong>ì£¼ì¸ì´ ì•„ë‹Œìª½ì€ ë°ì´í„°ì˜ ë³€ê²½ ë¶ˆê°€, ì½ê¸°ë§Œ ê°€ëŠ¥.</strong>
      - ì˜ˆë¥¼ ë“¤ì–´ ë©¤ë²„ê°€ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ì¼ë•Œ ```team.getMember().add(member);```ì„ ì‹¤í–‰í•˜ë©´ ì¿¼ë¦¬ëŠ” ë‚˜ê°€ì§€ë§Œ <mark>ì‹¤ì œ DBë¥¼ í™•ì¸í•´ë³´ë©´ ë§´ë²„ì˜ ì™¸ë˜í‚¤ ê°’ì´ nullë¡œ ì„¤ì •ëœë‹¤.</mark>
      - ```member.setTeam(team)```ìœ¼ë¡œ ì‚¬ìš©í•´ì•¼ í•œë‹¤.
    - ì£¼ì¸ì€ mappedBy ì†ì„±ì„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤.
    - ì£¼ì¸ì´ ì•„ë‹ˆë©´ mappedBy ì†ì„±ìœ¼ë¡œ ì£¼ì¸ì„ ì§€ì •í•´ì¤€ë‹¤.
    
    ```
    - ì£¼ë¡œ í…Œì´ë¸” ì„¤ê³„ì—ì„œ ì™¸ë˜ í‚¤ê°€ ìˆëŠ” ê³³ì„ ì£¼ì¸ìœ¼ë¡œ ì •í•œë‹¤.(Nì„ ë‹´ë‹¹í•˜ëŠ” ì—”í‹°í‹°)
  
    - ì˜ˆë¥¼ ë“¤ì–´ íŒ€ê³¼ ë©¤ë²„ì˜ ê´€ê³„ì—ì„œëŠ” ë©¤ë²„ê°€ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ì´ ëœë‹¤.
    ë§Œì•½ íŒ€ì„ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ìœ¼ë¡œ ì„¤ì •í•˜ê²Œ ë˜ë©´ íŒ€ì— ë©¤ë²„ë¥¼ ì¶”ê°€í•˜ì˜€ëŠ”ë°,ë©¤ë²„ì˜ ì—…í…Œì´íŠ¸ ì¿¼ë¦¬ê°€ ë°œìƒí•˜ë¯€ë¡œ, ë§ì§€ì•Šë‹¤.
    ì„±ëŠ¥ ì´ìŠˆ ë˜í•œ ë°œìƒ. 
    ```
      
    > ğŸ– ë°ì´í„°ë¥¼ ì €ì¥í•  ë–„ì—ëŠ” ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ ë¿ë§Œ ì•„ë‹ˆë¼ ì—­ë°©í–¥ì—ë„ ì„¸íŒ…ì„ í•´ì£¼ëŠ” ê²ƒì´ ì¢‹ë‹¤.
    > ```java
    >   team.getMembers().add(member);
    >   member.setTeam(team);
    > ```
    > - í•œ íŠ¸ëœì­ì…˜ ì•ˆì—ì„œ ì¡°íšŒë¥¼ í•˜ê³ ì í•  ë•Œ flush(), clear()ë¥¼ í•´ì£¼ê³  ë‹¤ì‹œ ì¡°íšŒë¥¼ í•œë‹¤ë©´ ìƒê´€ì—†ì§€ë§Œ, ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ 1ì°¨ ìºì‹œì— ìˆë˜ ë°ì´í„°ë¥¼ ê·¸ëŒ€ë¡œ ë¶ˆëŸ¬ì˜¤ê¸° ë•Œë¬¸ì— <mark>ì´ì „ì— ì¶”ê°€í•œ ë°ì´í„°ë¥¼ team.getMembers()ë¡œ ì¡°íšŒí•  ìˆ˜ ì—†ê²Œ ëœë‹¤.</mark>(1ì°¨ ìºì‹œì— ì €ì¥ëœ ë°ì´í„°ì—ì„œ ë¶ˆëŸ¬ì˜¤ê²Œ ë¨)
    > - ê°ì²´ ì§€í–¥ì ìœ¼ë¡œë„ ì´ìƒì .
    > - í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì‘ì„±í•  ë•Œ ë” ìœ ì—°í•¨.
    > - ì—°ê´€ê´€ê³„ í¸ì˜ ë©”ì„œë“œë¥¼ ì‘ì„± (ìœ„ì˜ ë‘ ê³¼ì •ì„ í•˜ë‚˜ì˜ ë©”ì„œë“œë¡œ, ë©¤ë²„ ë©”ì„œë“œ)
    
    > ğŸ– ì–‘ë°©í–¥ ë§¤í•‘ì‹œ ë¬´í•œ ë£¨í”„ë¥¼ ì¡°ì‹¬í•˜ì.
    > - ê¸°ë³¸ toString() ì‚¬ìš©ì‹œ ì„œë¡œë¥¼ í˜¸ì¶œí•˜ê¸° ë•Œë¬¸ì— ë¬´í•œë£¨í”„ê°€ ë°œìƒí•œë‹¤. (teamì—ì„œëŠ” memberë¥¼ meberì—ì„œëŠ” teamì„)
    > - JSON ìƒì„± ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œë„ ë§ˆì°¬ê°€ì§€ì˜ ìƒí™©ì´ ë°œìƒí•  ìˆ˜ ìˆë‹¤.    
     => í•´ê²° : ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œëŠ” ì—”í‹°í‹°ë¥¼ ë°˜í™˜í•˜ì§€ ë§ì•„ì•¼ í•œë‹¤. DTOë¡œ ë°˜í™˜í•´ì•¼ í•œë‹¤.
    

# ğŸ“Œ ë‹¤ì–‘í•œ ì—°ê´€ê´€ê³„ ë§¤í•‘
****
> âœï¸ ê³ ë ¤ ì‚¬í•­
> - ë‹¤ì¤‘ì„± : ë‹¤ëŒ€ì¼ ì¼ëŒ€ë‹¤, ì¼ëŒ€ì¼, ë‹¤ëŒ€ë‹¤(ì‚¬ìš© ì§€ì–‘)
> - ë‹¨ë°©í–¥ ,ì–‘ë°©í–¥
> > - í…Œì´ë¸” : ì™¸ë˜ í‚¤ í•˜ë‚˜ë¡œ ì–‘ìª½ ì¡°ì¸ì´ ê°€ëŠ¥, ë°©í–¥ì´ë¼ëŠ” ê°œë…ì´ ì—†ë‹¤.
> > - ê°ì²´ : ì°¸ì¡°ìš© í•„ë“œê°€ ìˆëŠ” ìª½ìœ¼ë¡œë§Œ ì°¸ì¡° ê°€ëŠ¥. ì–‘ë°©í–¥ì€ ì‚¬ì‹¤ìƒ ë‘ ê°œì˜ ë‹¨ë°©í–¥ -> ì™¸ë˜í‚¤ë¥¼ ê´€ë¦¬í•  ê³³ì„ ì •í•´ì£¼ì–´ì•¼ í•œë‹¤ -> ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸.


## â˜ï¸ ë‹¤ëŒ€ì¼ (N:1)
> ![img_4.png](img_4.png)
- Nì— í•´ë‹¹í•˜ëŠ” ê³³ì´ ì™¸ë˜í‚¤ë¥¼ ê´€ë¦¬.
  ```java
  @ManyToOne
  @JoinColumn(name="team_id")
  Team team;
  ```
- <mark>ì–‘ë°©í–¥</mark>ì€ ë°˜ëŒ€ìª½ì— @OneToManyë¥¼ ì¶”ê°€í•˜ì—¬ ì½ì„ ìˆ˜ ìˆëŠ” ì°¸ì¡°ë¥¼ ì¶”ê°€.
- ë°˜ë“œì‹œ mappedByë¥¼ ì¶”ê°€.
  ````java  
  @OneToMany(maapedBy="team")
  List<Member> merbers = new ArrayList<>();
  ````
- ì–‘ë°©í–¥ì„ ìœ„í•´ ì°¸ì¡°ë¥¼ ì¶”ê°€í•˜ë”ë¼ë„ í…Œì´ë¸”ì— ì˜í–¥ì„ ì£¼ì§€ ì•ŠëŠ”ë‹¤.

## â˜ï¸ ì¼ëŒ€ë‹¤ (1:N) ë‹¨ë°©í–¥
> ![img_5.png](img_5.png)
- ì˜ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤.
- <mark>ê°ì²´ì™€ í…Œì´ë¸”ì´ ì™¸ë˜í‚¤ë¥¼ ì„œë¡œ ë‹¤ë¥¸ê³³ì—ì„œ ê°€ì§€ê³  ìˆê²Œ ëœë‹¤.<mark>(í…Œì´ë¸”ì€ í•­ìƒ Nìª½ì— ì™¸ë˜í‚¤ê°€ ìˆìŒ.)
- Teamì˜ List<Member>ë¥¼ ë³€ê²½ì‹œí‚¤ë©´ Member í…Œì´ë¸”ì— TEAM_IDê°€ ë°”ë€Œë„ë¡ ì¿¼ë¦¬ê°€ ë°œìƒí•œë‹¤.(ë©¤ë²„ í…Œì´ë¸”ì˜ ì—…ë°ì´íŠ¸ ì¿¼ë¦¬ê°€ ë°œìƒ)
    ```java
    @OneToMany
    @JoinColumn(name = "team_id")
    private List<Member> members = new ArrayList<>();
    ```
  - ë©¤ë²„ í…Œì´ë¸”ì˜ team_idì™€ ì¡°ì¸.(JoinColumnì„ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë©´ JoinTableë°©ì‹ì„ ì‚¬ìš©í•˜ê²Œ ëœë‹¤. -> <mark>ì¤‘ê°„ í…Œì´ë¸”ì´ ìƒˆë¡œ ìƒì„±ë¨</mark>)
- íŒ€ ê°ì²´ë¥¼ ìˆ˜ì •í–ˆëŠ”ë° ë©¤ë²„ í…Œì´ë¸”ì— ì¿¼ë¦¬ê°€ ë‚˜ê°€ë¯€ë¡œ í—·ê°ˆë¦´ ìˆ˜ ìˆë‹¤. -> ì°¨ë¼ë¦¬ ë‹¤ëŒ€ì¼ ì–‘ë°©í–¥ì„ ì‚¬ìš©.

## â˜ï¸ ì¼ëŒ€ì¼ (1:1)
- ì£¼ í…Œì´ë¸”ê³¼ ëŒ€ìƒ í…Œì´ë¸” ì¤‘ì— ì™¸ë˜í‚¤ ì„ íƒ ê°€ëŠ¥.

> - ì£¼ í…Œì´ë¸”ì— ì™¸ë˜í‚¤
> 
> ![img_6.png](img_6.png)
```java
// Member
@OneToOne
@JoinColumn(name="locker_id")
private Locker locker;
```
- ì–‘ë°©í–¥ìœ¼ë¡œ ë§Œë“¤ê³  ì‹¶ìœ¼ë©´ ë°˜ëŒ€í¸ì— ì°¸ì¡°ë¥¼ ì¶”ê°€í•˜ê³  mappedByë¥¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤.
```java
//Locker                 
@OneToOne(mappedBy = "locker")
private Member member;
```
- ìì‹ ì˜ í…Œì´ë¸”ì— ìˆëŠ” ì™¸ë˜í‚¤ë¥¼ ê´€ë¦¬í•œë‹¤. ìƒëŒ€ í…Œì´ë¸”ì˜ ì™¸ë˜í‚¤ ê´€ë¦¬ ë¶ˆê°€ëŠ¥.
```
- ì£¼ í…Œì´ë¸”ì— ì™¸ë˜í‚¤ : ì£¼ ê°ì²´ê°€ ëŒ€ìƒ ê°ì²´ì˜ ì°¸ì¡°ë¥¼ ê°€ì§€ëŠ” í˜•íƒœ. ê°ì²´ ì§€í–¥ ê°œë°œìê°€ ì„ í˜¸, JPA ë§¤í•‘ í¸ë¦¬
  ì¥ì : ì£¼ í…Œì´ë¸”ë§Œ ì¡°íšŒí•´ë„ ëŒ€ìƒ í…Œì´ë¸” ë°ì´í„° ì—¬ë¶€ í™•ì¸ ê°€ëŠ¥, ë‹¤ëŒ€ì¼ë¡œ ë³€ê²½ì´ í…Œì´ë¸” êµ¬ì¡° ìœ ì§€.
  ë‹¨ì : ê°’ì´ ì—†ë‹¤ë©´ nullì„ í—ˆìš©í•˜ê²Œ ë¨.
- ëŒ€ìƒ í…Œì´ë¸”ì— ì™¸ë˜ í‚¤ : ì „í†µì ì¸ DBAê°€ ì„ í˜¸
  ì¥ì : ì£¼ í…Œì´ë¸”ê³¼ ëŒ€ìƒ í…Œì´ë¸”ì„ ì¼ëŒ€ì¼ì—ì„œ ì¼ëŒ€ë‹¤ ê´€ê³„ë¡œ ë³€ê²½í•  ë•Œ í…Œì´ë¸” êµ¬ì¡° ìœ ì§€.
  ë‹¨ì : í”„ë¡ì‹œ ê¸°ëŠ¥ì˜ í•œê³„ë¡œ í•­ìƒ ì¦‰ì‹œ ë¡œë”©ìœ¼ë¡œ ì‚¬ìš© ë¨.(ì–´ì°¨í”¼ ëŒ€ìƒ í…Œì´ë¸”ì„ ì¿¼ë¦¬í•´ì•¼ ì•Œ ìˆ˜ ìˆìŒ.)
```

## â˜ï¸ ë‹¤ëŒ€ë‹¤ (N:M)
```java
// Member
@ManyToMany
@JoinTable(name="MEMBER_PRODUCT")
private List<Product> products = new ArrayList<>();
```

- ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ëŠ” ì •ê·œí™”ëœ í…Œì´ë¸” ë‘ ê°œë¡œ ë‹¤ëŒ€ë‹¤ ê´€ê³„ë¥¼ í‘œí˜„í•  ìˆ˜ ì—†ë‹¤.
- ì¶”ê°€ì ì¸ ì •ë³´ë¥¼ ë„£ëŠ”ê²ƒì´ ë¶ˆê°€ëŠ¥í•˜ë‹¤.
- ìƒê°ì§€ë„ ëª»í•œ ì¿¼ë¦¬ê°€ ë°œìƒí•˜ê¸°ë„ í•œë‹¤.
- ì‹¤ë¬´ì—ì„œ ì‚¬ìš© ì§€ì–‘. <mark>ì¼ëŒ€ë‹¤ + ë‹¤ëŒ€ì¼ + ì¼ëŒ€ë‹¤ ê´€ê³„ë¡œ í’€ì–´ë‚´ì•¼ í•œë‹¤.</mark>

> ![img_7.png](img_7.png)
> - ì¤‘ê°„ í…Œì´ë¸”ì„ ì—”í‹°í‹°ë¡œ ìŠ¹ê²©.
> - ì¼ëŒ€ë‹¤, ë‹¤ëŒ€ì¼, ì¼ëŒ€ë‹¤ë¡œ í’ˆì–´ë‚¸ë‹¤.

```java
// Member
@OneToMany(mappedBy = "member")
private List<MemberProduct> memberProducts = new ArrayList<>();
```
```java
// MemberProduct
@ManyToOne
@JoinColumn(name = "member_id")
Member member;

@ManyToOne
@JoinColumn(name = "product_id")
Product product;
```

```java
// Product
@OneToMany(mappedBy = "product")
private List<MemberProduct> memberProducts = new ArrayList<>();
```


### ğŸ¤” @JoinColumn ì£¼ìš” ì†ì„±
- name : ë§¤í•‘í•  ì™¸ë˜ í‚¤ ì´ë¦„ 
    ```java
    @JoinColumn(name = "member_id")
    Member member;
    ```
- referencedColumnName : ì™¸ë˜ í‚¤ê°€ ì°¸ì¡°í•˜ëŠ” ëŒ€ìƒ í…Œì´ë¸”ì˜ ì»¬ëŸ¼ëª….(ë‹¤ë¥¼ ê²½ìš° ì‚¬ìš©)
- foreignKey(DDL) : ì™¸ë˜ í‚¤ ì œì•½ ì¡°ê±´ì„ ì§ì ‘ ì§€ì •, í…Œì´ë¸”ì„ ìƒì„±í• ë•Œë§Œ ì‚¬ìš©ëœë‹¤.
- unique, nullable, insertale, updatable, columnDefinition, table ...

### ğŸ¤” @ManyToOne ì£¼ìš” ì†ì„±
- optional : falseë¡œ ì„¤ì •í•˜ë©´ ì—°ê´€ëœ ì—”í‹°í‹°ê°€ í•­ìƒ ìˆì–´ì•¼ í•œë‹¤ (default = true)
- fetch : ê¸€ë¡œë²Œ íŒ¨ì¹˜ ì „ëµì„ ì„¤ì •. (default = FetchType.EAGER)
- cascade : ì˜ì†ì„  ì „ì´ ê¸°ëŠ¥.

### ğŸ¤” @OneToMany
- mappedBy : ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ í•„ë“œë¥¼ ì„ íƒ.
- fetch : ê¸€ë¡œë²Œ íŒ¨ì¹˜ ì „ëµì„ ì„¤ì •. (default = FetchType.LAZY)
- cascade : ì˜ì†ì„  ì „ì´ ê¸°ëŠ¥. 
